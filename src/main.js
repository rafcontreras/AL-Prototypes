'use strict';$(document).ready(function(){$('h1.page-title').attr('style','outline:none;');$('h1.page-title').attr('tabindex','0');$('h1.page-title').focus()});$(function(){try{$(".ms-rteElement-ALSubHeading").addClass("subheading");$(".ms-rteElement-ALLead").addClass("lead uk-margin-large-bottom");$(".ms-rteElement-ALParagraph").addClass("uk-margin-large-bottom");$("ul.ms-rteElement-ALParagraph").removeAttr('class');$("a.ms-rteElement-ALLink1").addClass("border-link");$("a.ms-rteElement-ALLink2").addClass("uk-link");$("img.ms-rteImage-Tohu").removeAttr("style");$(".tohu-image .image-wrap").removeAttr("class");$("img.ms-rteImage-Tohu").wrap('<div class="image-wrap with-tohu"></div>');$(".ms-rteTable-ALTable1").each(function(index,value){styleTable($(value))});$(".ms-rteTable-ALTable2").each(function(index,value){styleStackedTable($(value))})}
catch(err){console.log(err)}
function styleStackedTable(table){table.prepend("<thead></thead>");table.find("thead").append(table.find(".ms-rteTableHeaderRow-ALTable2"));table.wrap('<div class="table-stacked-wrap"></div>');table.removeAttr('class');table.removeAttr('cellspacing');table.removeAttr('width');table.addClass("uk-table uk-table-striped uk-table-hover table-stacked");table.attr('data-table-stacked','');table.attr('aria-hidden','false');table.find(".ms-rteTableHeaderEvenCol-ALTable2").removeAttr("rowspan colspan style");table.find(".ms-rteTableHeaderOddCol-ALTable2").removeAttr("rowspan colspan style");table.find(".ms-rteTableHeaderRow-ALTable2").removeAttr("class rowspan colspan style");table.find(".ms-rteTableOddRow-ALTable2").removeAttr("class rowspan colspan style");table.find(".ms-rteTableEvenRow-ALTable2").removeAttr("class rowspan colspan style");table.find(".ms-rteTableHeaderEvenCol-ALTable2").removeAttr("class rowspan colspan style");table.find(".ms-rteTableHeaderOddCol-ALTable2").removeAttr("class rowspan colspan style");table.find(".ms-rteTableEvenCol-ALTable2").removeAttr("class rowspan colspan style");table.find(".ms-rteTableOddCol-ALTable2").removeAttr("class rowspan colspan style")}
function styleTable(table){table.prepend("<thead></thead>");table.find("thead").append(table.find(".ms-rteTableHeaderRow-ALTable1"));table.wrap('<div class="table-first-wrap"><div class="table-responsive"></div></div>');table.removeAttr('class');table.removeAttr('cellspacing');table.removeAttr('width');table.attr("data-table-first-col-fixed","true");table.addClass("uk-table uk-table-striped uk-table-hover");table.find(".ms-rteTableHeaderEvenCol-ALTable1").removeAttr("rowspan colspan style");table.find(".ms-rteTableHeaderOddCol-ALTable1").removeAttr("rowspan colspan style");table.find(".ms-rteTableHeaderRow-ALTable1").removeAttr("class rowspan colspan style");table.find(".ms-rteTableOddRow-ALTable1").removeAttr("class rowspan colspan style");table.find(".ms-rteTableEvenRow-ALTable1").removeAttr("class rowspan colspan style");table.find(".ms-rteTableHeaderEvenCol-ALTable1").removeAttr("class rowspan colspan style");table.find(".ms-rteTableHeaderOddCol-ALTable1").removeAttr("class rowspan colspan style");table.find(".ms-rteTableEvenCol-ALTable1").removeAttr("class rowspan colspan style");table.find(".ms-rteTableOddCol-ALTable1").removeAttr("class rowspan colspan style")}});(function(addon){var component;if(window.UIkit){component=addon(UIkit)}
if(typeof define=='function'&&define.amd){define('uikit-slider',['uikit'],function(){return component||addon(UIkit)})}})(function(UI){"use strict";var dragging,_delayIdle,anchor,dragged,store={};UI.component('slider',{defaults:{center:!1,threshold:10,infinite:!0,autoplay:!1,autoplayInterval:7000,pauseOnHover:!0,activecls:'uk-active'},boot:function boot(){UI.ready(function(context){setTimeout(function(){UI.$('[data-uk-slider]',context).each(function(){var ele=UI.$(this);if(!ele.data('slider')){UI.slider(ele,UI.Utils.options(ele.attr('data-uk-slider')))}})},0)})},init:function init(){var $this=this;this.container=this.element.find('.uk-slider');this.focus=0;UI.$win.on('resize load',UI.Utils.debounce(function(){$this.update(!0)},100));this.on('click.uk.slider','[data-uk-slider-item]',function(e){e.preventDefault();var item=UI.$(this).attr('data-uk-slider-item');if($this.focus==item)return;$this.stop();switch(item){case 'next':case 'previous':$this[item=='next'?'next':'previous']();break;default:$this.updateFocus(parseInt(item,10))}});this.container.on({'touchstart mousedown':function touchstartMousedown(evt){if(evt.originalEvent&&evt.originalEvent.touches){evt=evt.originalEvent.touches[0]}
if(evt.button&&evt.button==2||!$this.active){return}
$this.stop();anchor=UI.$(evt.target).is('a')?UI.$(evt.target):UI.$(evt.target).parents('a:first');dragged=!1;if(anchor.length){anchor.one('click',function(e){if(dragged)e.preventDefault()})}
_delayIdle=function delayIdle(e){dragged=!0;dragging=$this;store={touchx:parseInt(e.pageX,10),dir:1,focus:$this.focus,base:$this.options.center?'center':'area'};if(e.originalEvent&&e.originalEvent.touches){e=e.originalEvent.touches[0]}
dragging.element.data({'pointer-start':{x:parseInt(e.pageX,10),y:parseInt(e.pageY,10)},'pointer-pos-start':$this.pos});$this.container.addClass('uk-drag');_delayIdle=!1};_delayIdle.x=parseInt(evt.pageX,10);_delayIdle.threshold=$this.options.threshold},mouseenter:function mouseenter(){if($this.options.pauseOnHover)$this.hovering=!0},mouseleave:function mouseleave(){$this.hovering=!1}});this.update(!0);this.on('display.uk.check',function(){if($this.element.is(":visible")){$this.update(!0)}});this.element.find('a,img').attr('draggable','false');if(this.options.autoplay){this.start()}
UI.domObserve(this.element,function(e){if($this.element.children(':not([data-slider-slide])').length){$this.update(!0)}})},update:function update(focus){var $this=this,pos=0,maxheight=0,item,width,cwidth,size;this.items=this.container.children().filter(':visible');this.vp=this.element[0].getBoundingClientRect().width;this.container.css({'min-width':'','min-height':''});this.items.each(function(idx){item=UI.$(this).attr('data-slider-slide',idx);size=item.css({'left':'','width':''})[0].getBoundingClientRect();width=size.width;cwidth=item.width();maxheight=Math.max(maxheight,size.height);item.css({'left':pos,'width':width}).data({'idx':idx,'left':pos,'width':width,'cwidth':cwidth,'area':pos+width,'center':pos-($this.vp/2-cwidth/2)});pos+=width});this.container.css({'min-width':pos,'min-height':maxheight});if(this.options.infinite&&(pos<=2*this.vp||this.items.length<5)&&!this.itemsResized){this.container.children().each(function(idx){$this.container.append($this.items.eq(idx).clone(!0).attr('id',''))}).each(function(idx){$this.container.append($this.items.eq(idx).clone(!0).attr('id',''))});this.itemsResized=!0;return this.update()}
this.cw=pos;this.pos=0;this.active=pos>=this.vp;this.container.css({'-ms-transform':'','-webkit-transform':'','transform':''});if(focus)this.updateFocus(this.focus)},updatePos:function updatePos(pos){this.pos=Math.floor(pos);this.container.css({'-ms-transform':'translateX('+Math.floor(pos)+'px)','-webkit-transform':'translateX('+Math.floor(pos)+'px)','transform':'translateX('+Math.floor(pos)+'px)'})},updateFocus:function updateFocus(idx,dir){if(!this.active){return}
dir=dir||(idx>this.focus?1:-1);var item=this.items.eq(idx),area,i;if(this.options.infinite){this.infinite(idx,dir)}
if(this.options.center){this.updatePos(item.data('center')*-1);this.items.filter('.'+this.options.activecls).removeClass(this.options.activecls);item.addClass(this.options.activecls)}else{if(this.options.infinite){this.updatePos(item.data('left')*-1)}else{area=0;for(i=idx;i<this.items.length;i++){area+=this.items.eq(i).data('width')}
if(area>this.vp){this.updatePos(item.data('left')*-1)}else{if(dir==1){area=0;for(i=this.items.length-1;i>=0;i--){area+=this.items.eq(i).data('width');if(area==this.vp){idx=i;break}
if(area>this.vp){idx=i<this.items.length-1?i+1:i;break}}
if(area>this.vp){this.updatePos((this.container.width()-this.vp)*-1)}else{this.updatePos(this.items.eq(idx).data('left')*-1)}}}}}
var left=this.items.eq(idx).data('left');this.items.removeClass('uk-slide-before uk-slide-after').each(function(i){if(i!==idx){UI.$(this).addClass(UI.$(this).data('left')<left?'uk-slide-before':'uk-slide-after')}});this.focus=idx;this.trigger('focusitem.uk.slider',[idx,this.items.eq(idx),this])},next:function next(){var focus=this.items[this.focus+1]?this.focus+1:this.options.infinite?0:this.focus;this.updateFocus(focus,1)},previous:function previous(){var focus=this.items[this.focus-1]?this.focus-1:this.options.infinite?this.items[this.focus-1]?this.items-1:this.items.length-1:this.focus;this.updateFocus(focus,-1)},start:function start(){this.stop();var $this=this;this.interval=setInterval(function(){if(!$this.hovering)$this.next()},this.options.autoplayInterval)},stop:function stop(){if(this.interval)clearInterval(this.interval)},infinite:function infinite(baseidx,direction){var $this=this,item=this.items.eq(baseidx),i,z=baseidx,move=[],area=0;if(direction==1){for(i=0;i<this.items.length;i++){if(z!=baseidx){area+=this.items.eq(z).data('width');move.push(this.items.eq(z))}
if(area>this.vp){break}
z=z+1==this.items.length?0:z+1}
if(move.length){move.forEach(function(itm){var left=item.data('area');itm.css({'left':left}).data({left:left,area:left+itm.data('width'),center:left-($this.vp/2-itm.data('cwidth')/2)});item=itm})}}else{for(i=this.items.length-1;i>-1;i--){area+=this.items.eq(z).data('width');if(z!=baseidx){move.push(this.items.eq(z))}
if(area>this.vp){break}
z=z-1==-1?this.items.length-1:z-1}
if(move.length){move.forEach(function(itm){var left=item.data('left')-itm.data('width');itm.css({'left':left}).data({left:left,area:left+itm.data('width'),center:left-($this.vp/2-itm.data('cwidth')/2)});item=itm})}}}});UI.$doc.on('mousemove.uk.slider touchmove.uk.slider',function(e){if(e.originalEvent&&e.originalEvent.touches){e=e.originalEvent.touches[0]}
if(_delayIdle&&Math.abs(e.pageX-_delayIdle.x)>_delayIdle.threshold){if(!window.getSelection().toString()){_delayIdle(e)}else{dragging=_delayIdle=!1}}
if(!dragging){return}
var x,xDiff,pos,dir,focus,item,next,diff,i,z,itm;if(e.clientX||e.clientY){x=e.clientX}else if(e.pageX||e.pageY){x=e.pageX-document.body.scrollLeft-document.documentElement.scrollLeft}
focus=store.focus;xDiff=x-dragging.element.data('pointer-start').x;pos=dragging.element.data('pointer-pos-start')+xDiff;dir=x>dragging.element.data('pointer-start').x?-1:1;item=dragging.items.eq(store.focus);if(dir==1){diff=item.data('left')+Math.abs(xDiff);for(i=0,z=store.focus;i<dragging.items.length;i++){itm=dragging.items.eq(z);if(z!=store.focus&&itm.data('left')<diff&&itm.data('area')>diff){focus=z;break}
z=z+1==dragging.items.length?0:z+1}}else{diff=item.data('left')-Math.abs(xDiff);for(i=0,z=store.focus;i<dragging.items.length;i++){itm=dragging.items.eq(z);if(z!=store.focus&&itm.data('area')<=item.data('left')&&itm.data('center')<diff){focus=z;break}
z=z-1==-1?dragging.items.length-1:z-1}}
if(dragging.options.infinite&&focus!=store._focus){dragging.infinite(focus,dir)}
dragging.updatePos(pos);store.dir=dir;store._focus=focus;store.touchx=parseInt(e.pageX,10);store.diff=diff});UI.$doc.on('mouseup.uk.slider touchend.uk.slider',function(e){if(dragging){dragging.container.removeClass('uk-drag');dragging.items.eq(store.focus);var itm,focus=!1,i,z;if(store.dir==1){for(i=0,z=store.focus;i<dragging.items.length;i++){itm=dragging.items.eq(z);if(z!=store.focus&&itm.data('left')>store.diff){focus=z;break}
z=z+1==dragging.items.length?0:z+1}
if(!dragging.options.infinite&&!focus){focus=dragging.items.length}}else{for(i=0,z=store.focus;i<dragging.items.length;i++){itm=dragging.items.eq(z);if(z!=store.focus&&itm.data('left')<store.diff){focus=z;break}
z=z-1==-1?dragging.items.length-1:z-1}
if(!dragging.options.infinite&&!focus){focus=0}}
dragging.updateFocus(focus!==!1?focus:store._focus)}
dragging=_delayIdle=!1});return UI.slider});'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','moment'],factory)}else if((typeof exports==='undefined'?'undefined':_typeof(exports))==='object'&&typeof module!=='undefined'){module.exports=factory(require('jquery'),require('moment'))}else{factory(jQuery,moment)}})(function($,moment){'use strict';$.dateRangePickerLanguages={'default':{'selected':'Selected:','day':'Day','days':'Days','apply':'Close','week-1':'mo','week-2':'tu','week-3':'we','week-4':'th','week-5':'fr','week-6':'sa','week-7':'su','week-number':'W','month-name':['january','february','march','april','may','june','july','august','september','october','november','december'],'shortcuts':'Shortcuts','custom-values':'Custom Values','past':'Past','following':'Following','previous':'Previous','prev-week':'Week','prev-month':'Month','prev-year':'Year','next':'Next','next-week':'Week','next-month':'Month','next-year':'Year','less-than':'Date range should not be more than %d days','more-than':'Date range should not be less than %d days','default-more':'Please select a date range longer than %d days','default-single':'Please select a date','default-less':'Please select a date range less than %d days','default-range':'Please select a date range between %d and %d days','default-default':'Please select a date range','time':'Time','hour':'Hour','minute':'Minute'}};$.fn.dateRangePicker=function(opt){if(!opt)opt={};opt=$.extend(!0,{autoClose:!1,format:'YYYY-MM-DD',separator:' to ',language:'auto',startOfWeek:'sunday',getValue:function getValue(){return $(this).val()},setValue:function setValue(s){if(!$(this).is(':disabled')&&s!=$(this).val()){$(this).val(s)}},startDate:!1,endDate:!1,time:{enabled:!1},minDays:0,maxDays:0,showShortcuts:!1,shortcuts:{},customShortcuts:[],inline:!1,container:'body',alwaysOpen:!1,singleDate:!1,lookBehind:!1,batchMode:!1,duration:200,stickyMonths:!1,dayDivAttrs:[],dayTdAttrs:[],selectForward:!1,selectBackward:!1,applyBtnClass:'',singleMonth:'auto',hoveringTooltip:function hoveringTooltip(days,startTime,hoveringTime){return days>1?days+' '+lang('days'):''},showTopbar:!0,swapTime:!1,showWeekNumbers:!1,getWeekNumber:function getWeekNumber(date)
{return moment(date).format('w')},customOpenAnimation:null,customCloseAnimation:null,customArrowPrevSymbol:null,customArrowNextSymbol:null},opt);opt.start=!1;opt.end=!1;opt.startWeek=!1;opt.isTouchDevice='ontouchstart' in window||navigator.msMaxTouchPoints;if(opt.isTouchDevice)opt.hoveringTooltip=!1;if(opt.singleMonth=='auto')opt.singleMonth=$(window).width()<480;if(opt.singleMonth)opt.stickyMonths=!1;if(!opt.showTopbar)opt.autoClose=!0;if(opt.startDate&&typeof opt.startDate=='string')opt.startDate=moment(opt.startDate,opt.format).toDate();if(opt.endDate&&typeof opt.endDate=='string')opt.endDate=moment(opt.endDate,opt.format).toDate();var langs=getLanguages();var box;var initiated=!1;var self=this;var selfDom=$(self).get(0);var domChangeTimer;$(this).unbind('.datepicker').bind('click.datepicker',function(evt){var isOpen=box.is(':visible');if(!isOpen)open(opt.duration)}).bind('change.datepicker',function(evt){checkAndSetDefaultValue()}).bind('keyup.datepicker',function(){try{clearTimeout(domChangeTimer)}catch(e){}
domChangeTimer=setTimeout(function(){checkAndSetDefaultValue()},2000)});init_datepicker.call(this);if(opt.alwaysOpen){open(0)}
$(this).data('dateRangePicker',{setStart:function setStart(d1){if(typeof d1=='string'){d1=moment(d1,opt.format).toDate()}
opt.end=!1;setSingleDate(d1);return this},setEnd:function setEnd(d2,silent){var start=new Date();start.setTime(opt.start);if(typeof d2=='string'){d2=moment(d2,opt.format).toDate()}
_setDateRange(start,d2,silent);return this},setDateRange:function setDateRange(d1,d2,silent){if(typeof d1=='string'&&typeof d2=='string'){d1=moment(d1,opt.format).toDate();d2=moment(d2,opt.format).toDate()}
_setDateRange(d1,d2,silent)},clear:clearSelection,close:closeDatePicker,open:open,redraw:redrawDatePicker,getDatePicker:getDatePicker,resetMonthsView:resetMonthsView,destroy:function destroy(){$(self).unbind('.datepicker');$(self).data('dateRangePicker','');$(self).data('date-picker-opened',null);box.remove();$(window).unbind('resize.datepicker',calcPosition);$(document).unbind('click.datepicker',closeDatePicker)}});$(window).bind('resize.datepicker',calcPosition);return this;function IsOwnDatePickerClicked(evt,selfObj){return selfObj.contains(evt.target)||evt.target==selfObj||selfObj.childNodes!=undefined&&$.inArray(evt.target,selfObj.childNodes)>=0}
function init_datepicker(){var self=this;if($(this).data('date-picker-opened')){closeDatePicker();return}
$(this).data('date-picker-opened',!0);box=createDom().hide();box.append('<div class="date-range-length-tip"></div>');$(opt.container).append(box);if(!opt.inline){calcPosition()}else{box.addClass('inline-wrapper')}
if(opt.alwaysOpen){box.find('.apply-btn').hide()}
var defaultTime=getDefaultTime();resetMonthsView(defaultTime);if(opt.time.enabled){if(opt.startDate&&opt.endDate||opt.start&&opt.end){showTime(moment(opt.start||opt.startDate).toDate(),'time1');showTime(moment(opt.end||opt.endDate).toDate(),'time2')}else{var defaultEndTime=opt.defaultEndTime?opt.defaultEndTime:defaultTime;showTime(defaultTime,'time1');showTime(defaultEndTime,'time2')}}
var defaultTopText='';if(opt.singleDate)defaultTopText=lang('default-single');else if(opt.minDays&&opt.maxDays)defaultTopText=lang('default-range');else if(opt.minDays)defaultTopText=lang('default-more');else if(opt.maxDays)defaultTopText=lang('default-less');else defaultTopText=lang('default-default');box.find('.default-top').html(defaultTopText.replace(/\%d/,opt.minDays).replace(/\%d/,opt.maxDays));if(opt.singleMonth){box.addClass('single-month')}else{box.addClass('two-months')}
setTimeout(function(){updateCalendarWidth();initiated=!0},0);box.click(function(evt){evt.stopPropagation()});$(document).bind('click.datepicker',function(evt){if(!IsOwnDatePickerClicked(evt,self[0])){if(box.is(':visible'))closeDatePicker()}});box.find('.next').click(function(e){e.preventDefault();if(!opt.stickyMonths)gotoNextMonth(this);else gotoNextMonth_stickily(this)});function gotoNextMonth(self){var isMonth2=$(self).parents('table').hasClass('month2');var month=isMonth2?opt.month2:opt.month1;month=nextMonth(month);if(!opt.singleMonth&&!opt.singleDate&&!isMonth2&&compare_month(month,opt.month2)>=0||isMonthOutOfBounds(month))return;showMonth(month,isMonth2?'month2':'month1');showGap()}
function gotoNextMonth_stickily(self){var nextMonth1=nextMonth(opt.month1);var nextMonth2=nextMonth(opt.month2);if(isMonthOutOfBounds(nextMonth2))return;if(!opt.singleDate&&compare_month(nextMonth1,nextMonth2)>=0)return;showMonth(nextMonth1,'month1');showMonth(nextMonth2,'month2');showSelectedDays()}
box.find('.prev').click(function(e){e.preventDefault();if(!opt.stickyMonths)gotoPrevMonth(this);else gotoPrevMonth_stickily(this)});function gotoPrevMonth(self){var isMonth2=$(self).parents('table').hasClass('month2');var month=isMonth2?opt.month2:opt.month1;month=prevMonth(month);if(isMonth2&&compare_month(month,opt.month1)<=0||isMonthOutOfBounds(month))return;showMonth(month,isMonth2?'month2':'month1');showGap()}
function gotoPrevMonth_stickily(self){var prevMonth1=prevMonth(opt.month1);var prevMonth2=prevMonth(opt.month2);if(isMonthOutOfBounds(prevMonth1))return;if(!opt.singleDate&&compare_month(prevMonth2,prevMonth1)<=0)return;showMonth(prevMonth2,'month2');showMonth(prevMonth1,'month1');showSelectedDays()}
box.bind('selectstart',function(e){e.preventDefault();return!1});box.find('.apply-btn').click(function(){closeDatePicker();var dateRange=getDateString(new Date(opt.start))+opt.separator+getDateString(new Date(opt.end));$(self).trigger('datepicker-apply',{'value':dateRange,'date1':new Date(opt.start),'date2':new Date(opt.end)})});box.find('[custom]').click(function(){var valueName=$(this).attr('custom');opt.start=!1;opt.end=!1;box.find('.day.checked').removeClass('checked');opt.setValue.call(selfDom,valueName);checkSelectionValid();showSelectedInfo(!0);showSelectedDays();if(opt.autoClose)closeDatePicker()});box.find('[shortcut]').click(function(){var shortcut=$(this).attr('shortcut');var end=new Date(),start=!1;var dir;if(shortcut.indexOf('day')!=-1){var day=parseInt(shortcut.split(',',2)[1],10);start=new Date(new Date().getTime()+86400000*day);end=new Date(end.getTime()+86400000*(day>0?1:-1))}else if(shortcut.indexOf('week')!=-1){dir=shortcut.indexOf('prev,')!=-1?-1:1;var stopDay;if(dir==1)stopDay=opt.startOfWeek=='monday'?1:0;else stopDay=opt.startOfWeek=='monday'?0:6;end=new Date(end.getTime()-86400000);while(end.getDay()!=stopDay){end=new Date(end.getTime()+dir*86400000)}start=new Date(end.getTime()+dir*86400000*6)}else if(shortcut.indexOf('month')!=-1){dir=shortcut.indexOf('prev,')!=-1?-1:1;if(dir==1)start=nextMonth(end);else start=prevMonth(end);start.setDate(1);end=nextMonth(start);end.setDate(1);end=new Date(end.getTime()-86400000)}else if(shortcut.indexOf('year')!=-1){dir=shortcut.indexOf('prev,')!=-1?-1:1;start=new Date();start.setFullYear(end.getFullYear()+dir);start.setMonth(0);start.setDate(1);end.setFullYear(end.getFullYear()+dir);end.setMonth(11);end.setDate(31)}else if(shortcut=='custom'){var name=$(this).html();if(opt.customShortcuts&&opt.customShortcuts.length>0){for(var i=0;i<opt.customShortcuts.length;i++){var sh=opt.customShortcuts[i];if(sh.name==name){var data=[];data=sh.dates.call();if(data&&data.length==2){start=data[0];end=data[1]}
if(data&&data.length==1){var movetodate=data[0];showMonth(movetodate,'month1');showMonth(nextMonth(movetodate),'month2');showGap()}
break}}}}
if(start&&end){_setDateRange(start,end);checkSelectionValid()}});box.find('.time1 input[type=range]').bind('change touchmove',function(e){var target=e.target,hour=target.name=='hour'?$(target).val().replace(/^(\d{1})$/,'0$1'):undefined,min=target.name=='minute'?$(target).val().replace(/^(\d{1})$/,'0$1'):undefined;setTime('time1',hour,min)});box.find('.time2 input[type=range]').bind('change touchmove',function(e){var target=e.target,hour=target.name=='hour'?$(target).val().replace(/^(\d{1})$/,'0$1'):undefined,min=target.name=='minute'?$(target).val().replace(/^(\d{1})$/,'0$1'):undefined;setTime('time2',hour,min)})}
function calcPosition(){if(!opt.inline){var offset=$(self).offset();if($(opt.container).css('position')=='relative'){var containerOffset=$(opt.container).offset();box.css({top:offset.top-containerOffset.top+$(self).outerHeight()+4,left:offset.left-containerOffset.left})}else{if(offset.left<460)
{box.css({top:offset.top+$(self).outerHeight()+parseInt($('body').css('border-top')||0,10),left:offset.left})}else{box.css({top:offset.top+$(self).outerHeight()+parseInt($('body').css('border-top')||0,10),left:offset.left+$(self).width()-box.width()-16})}}}}
function getDatePicker(){return box}
function open(animationTime){calcPosition();redrawDatePicker();checkAndSetDefaultValue();if(opt.customOpenAnimation){opt.customOpenAnimation.call(box.get(0),function(){$(self).trigger('datepicker-opened',{relatedTarget:box})})}else{box.slideDown(animationTime,function(){$(self).trigger('datepicker-opened',{relatedTarget:box})})}
$(self).trigger('datepicker-open',{relatedTarget:box});showGap();updateCalendarWidth()}
function checkAndSetDefaultValue(){var __default_string=opt.getValue.call(selfDom);var defaults=__default_string?__default_string.split(opt.separator):'';if(defaults&&(defaults.length==1&&opt.singleDate||defaults.length>=2)){var ___format=opt.format;if(___format.match(/Do/)){___format=___format.replace(/Do/,'D');defaults[0]=defaults[0].replace(/(\d+)(th|nd|st)/,'$1');if(defaults.length>=2){defaults[1]=defaults[1].replace(/(\d+)(th|nd|st)/,'$1')}}
initiated=!1;if(defaults.length>=2){_setDateRange(getValidValue(defaults[0],___format,moment.locale(opt.language)),getValidValue(defaults[1],___format,moment.locale(opt.language)))}else if(defaults.length==1&&opt.singleDate){setSingleDate(getValidValue(defaults[0],___format,moment.locale(opt.language)))}
initiated=!0}}
function getValidValue(date,format,locale){if(moment(date,format,locale).isValid()){return moment(date,format,locale).toDate()}else{return moment().toDate()}}
function updateCalendarWidth(){var gapMargin=box.find('.gap').css('margin-left');if(gapMargin)gapMargin=parseInt(gapMargin);var w1=box.find('.month1').width();var w2=box.find('.gap').width()+(gapMargin?gapMargin*2:0);var w3=box.find('.month2').width();box.find('.month-wrapper').width(w1+w2+w3)}
function renderTime(name,date){box.find('.'+name+' input[type=range].hour-range').val(moment(date).hours());box.find('.'+name+' input[type=range].minute-range').val(moment(date).minutes());setTime(name,moment(date).format('HH'),moment(date).format('mm'))}
function changeTime(name,date){opt[name]=parseInt(moment(parseInt(date)).startOf('day').add(moment(opt[name+'Time']).format('HH'),'h').add(moment(opt[name+'Time']).format('mm'),'m').valueOf())}
function swapTime(){renderTime('time1',opt.start);renderTime('time2',opt.end)}
function setTime(name,hour,minute){hour&&box.find('.'+name+' .hour-val').text(hour);minute&&box.find('.'+name+' .minute-val').text(minute);switch(name){case 'time1':if(opt.start){setRange('start',moment(opt.start))}
setRange('startTime',moment(opt.startTime||moment().valueOf()));break;case 'time2':if(opt.end){setRange('end',moment(opt.end))}
setRange('endTime',moment(opt.endTime||moment().valueOf()));break}
function setRange(name,timePoint){var h=timePoint.format('HH'),m=timePoint.format('mm');opt[name]=timePoint.startOf('day').add(hour||h,'h').add(minute||m,'m').valueOf()}
checkSelectionValid();showSelectedInfo();showSelectedDays()}
function clearSelection(){opt.start=!1;opt.end=!1;box.find('.day.checked').removeClass('checked');box.find('.day.last-date-selected').removeClass('last-date-selected');box.find('.day.first-date-selected').removeClass('first-date-selected');opt.setValue.call(selfDom,'');checkSelectionValid();showSelectedInfo();showSelectedDays()}
function handleStart(time){var r=time;if(opt.batchMode==='week-range'){if(opt.startOfWeek==='monday'){r=moment(parseInt(time)).startOf('isoweek').valueOf()}else{r=moment(parseInt(time)).startOf('week').valueOf()}}else if(opt.batchMode==='month-range'){r=moment(parseInt(time)).startOf('month').valueOf()}
return r}
function handleEnd(time){var r=time;if(opt.batchMode==='week-range'){if(opt.startOfWeek==='monday'){r=moment(parseInt(time)).endOf('isoweek').valueOf()}else{r=moment(parseInt(time)).endOf('week').valueOf()}}else if(opt.batchMode==='month-range'){r=moment(parseInt(time)).endOf('month').valueOf()}
return r}
function dayClicked(day){if(day.hasClass('invalid'))return;var time=day.attr('time');if(opt.singleDate){opt.start=time;opt.end=!1}else if(opt.batchMode==='week'){if(opt.startOfWeek==='monday'){opt.start=moment(parseInt(time)).startOf('isoweek').valueOf();opt.end=moment(parseInt(time)).endOf('isoweek').valueOf()}else{opt.end=moment(parseInt(time)).endOf('week').valueOf();opt.start=moment(parseInt(time)).startOf('week').valueOf()}}else if(opt.batchMode==='workweek'){opt.start=moment(parseInt(time)).day(1).valueOf();opt.end=moment(parseInt(time)).day(5).valueOf()}else if(opt.batchMode==='weekend'){opt.start=moment(parseInt(time)).day(6).valueOf();opt.end=moment(parseInt(time)).day(7).valueOf()}else if(opt.batchMode==='month'){opt.start=moment(parseInt(time)).startOf('month').valueOf();opt.end=moment(parseInt(time)).endOf('month').valueOf()}else if(opt.start&&opt.end||!opt.start&&!opt.end){opt.start=handleStart(time);opt.end=!1}else if(opt.start){opt.end=handleEnd(time);if(opt.time.enabled){changeTime('end',opt.end)}}
if(opt.time.enabled){if(opt.start){changeTime('start',opt.start)}
if(opt.end){changeTime('end',opt.end)}}
if(!opt.singleDate&&opt.start&&opt.end&&opt.start>opt.end){var tmp=opt.end;opt.end=handleEnd(opt.start);opt.start=handleStart(tmp);if(opt.time.enabled&&opt.swapTime){swapTime()}}
opt.start=parseInt(opt.start);opt.end=parseInt(opt.end);clearHovering();if(opt.start&&!opt.end){$(self).trigger('datepicker-first-date-selected',{'date1':new Date(opt.start)});dayHovering(day)}
updateSelectableRange(time);checkSelectionValid();showSelectedInfo();showSelectedDays();autoclose()}
function weekNumberClicked(weekNumberDom){var thisTime=parseInt(weekNumberDom.attr('data-start-time'),10);var date1,date2;if(!opt.startWeek){opt.startWeek=thisTime;weekNumberDom.addClass('week-number-selected');date1=new Date(thisTime);opt.start=moment(date1).day(opt.startOfWeek=='monday'?1:0).valueOf();opt.end=moment(date1).day(opt.startOfWeek=='monday'?7:6).valueOf()}else{box.find('.week-number-selected').removeClass('week-number-selected');date1=new Date(thisTime<opt.startWeek?thisTime:opt.startWeek);date2=new Date(thisTime<opt.startWeek?opt.startWeek:thisTime);opt.startWeek=!1;opt.start=moment(date1).day(opt.startOfWeek=='monday'?1:0).valueOf();opt.end=moment(date2).day(opt.startOfWeek=='monday'?7:6).valueOf()}
updateSelectableRange();checkSelectionValid();showSelectedInfo();showSelectedDays();autoclose()}
function isValidTime(time){time=parseInt(time,10);if(opt.startDate&&compare_day(time,opt.startDate)<0)return!1;if(opt.endDate&&compare_day(time,opt.endDate)>0)return!1;if(opt.start&&!opt.end&&!opt.singleDate){if(opt.maxDays>0&&countDays(time,opt.start)>opt.maxDays)return!1;if(opt.minDays>0&&countDays(time,opt.start)<opt.minDays)return!1;if(opt.selectForward&&time<opt.start)return!1;if(opt.selectBackward&&time>opt.start)return!1;if(opt.beforeShowDay&&typeof opt.beforeShowDay=='function'){var valid=!0;var timeTmp=time;while(countDays(timeTmp,opt.start)>1){var arr=opt.beforeShowDay(new Date(timeTmp));if(!arr[0]){valid=!1;break}
if(Math.abs(timeTmp-opt.start)<86400000)break;if(timeTmp>opt.start)timeTmp-=86400000;if(timeTmp<opt.start)timeTmp+=86400000}
if(!valid)return!1}}
return!0}
function updateSelectableRange(){box.find('.day.invalid.tmp').removeClass('tmp invalid').addClass('valid');if(opt.start&&!opt.end){box.find('.day.valid').each(function(){var time=parseInt($(this).attr('time'),10);if(!isValidTime(time))$(this).addClass('invalid tmp').removeClass('valid');else $(this).addClass('valid tmp').removeClass('invalid')})}
return!0}
function dayHovering(day){var hoverTime=parseInt(day.attr('time'));var tooltip='';if(day.hasClass('has-tooltip')&&day.attr('data-tooltip')){tooltip='<span style="white-space:nowrap">'+day.attr('data-tooltip')+'</span>'}else if(!day.hasClass('invalid')){if(opt.singleDate){box.find('.day.hovering').removeClass('hovering');day.addClass('hovering')}else{box.find('.day').each(function(){var time=parseInt($(this).attr('time')),start=opt.start,end=opt.end;if(time==hoverTime){$(this).addClass('hovering')}else{$(this).removeClass('hovering')}
if(opt.start&&!opt.end&&(opt.start<time&&hoverTime>=time||opt.start>time&&hoverTime<=time)){$(this).addClass('hovering')}else{$(this).removeClass('hovering')}});if(opt.start&&!opt.end){var days=countDays(hoverTime,opt.start);if(opt.hoveringTooltip){if(typeof opt.hoveringTooltip=='function'){tooltip=opt.hoveringTooltip(days,opt.start,hoverTime)}else if(opt.hoveringTooltip===!0&&days>1){tooltip=days+' '+lang('days')}}}}}
if(tooltip){var posDay=day.offset();var posBox=box.offset();var _left=posDay.left-posBox.left;var _top=posDay.top-posBox.top;_left+=day.width()/2;var $tip=box.find('.date-range-length-tip');var w=$tip.css({'visibility':'hidden','display':'none'}).html(tooltip).width();var h=$tip.height();_left-=w/2;_top-=h;setTimeout(function(){$tip.css({left:_left,top:_top,display:'block','visibility':'visible'})},10)}else{box.find('.date-range-length-tip').hide()}}
function clearHovering(){box.find('.day.hovering').removeClass('hovering');box.find('.date-range-length-tip').hide()}
function autoclose(){if(opt.singleDate===!0){if(initiated&&opt.start){if(opt.autoClose)closeDatePicker()}}else{if(initiated&&opt.start&&opt.end){if(opt.autoClose)closeDatePicker()}}}
function checkSelectionValid(){var days=Math.ceil((opt.end-opt.start)/86400000)+1;if(opt.singleDate){if(opt.start&&!opt.end)box.find('.drp_top-bar').removeClass('error').addClass('normal');else box.find('.drp_top-bar').removeClass('error').removeClass('normal')}else if(opt.maxDays&&days>opt.maxDays){opt.start=!1;opt.end=!1;box.find('.day').removeClass('checked');box.find('.drp_top-bar').removeClass('normal').addClass('error').find('.error-top').html(lang('less-than').replace('%d',opt.maxDays))}else if(opt.minDays&&days<opt.minDays){opt.start=!1;opt.end=!1;box.find('.day').removeClass('checked');box.find('.drp_top-bar').removeClass('normal').addClass('error').find('.error-top').html(lang('more-than').replace('%d',opt.minDays))}else{if(opt.start||opt.end)box.find('.drp_top-bar').removeClass('error').addClass('normal');else box.find('.drp_top-bar').removeClass('error').removeClass('normal')}
if(opt.singleDate&&opt.start&&!opt.end||!opt.singleDate&&opt.start&&opt.end){box.find('.apply-btn').removeClass('disabled')}else{box.find('.apply-btn').addClass('disabled')}
if(opt.batchMode){if(opt.start&&opt.startDate&&compare_day(opt.start,opt.startDate)<0||opt.end&&opt.endDate&&compare_day(opt.end,opt.endDate)>0){opt.start=!1;opt.end=!1;box.find('.day').removeClass('checked')}}}
function showSelectedInfo(forceValid,silent){box.find('.start-day').html('...');box.find('.end-day').html('...');box.find('.selected-days').hide();if(opt.start){box.find('.start-day').html(getDateString(new Date(parseInt(opt.start))))}
if(opt.end){box.find('.end-day').html(getDateString(new Date(parseInt(opt.end))))}
var dateRange;if(opt.start&&opt.singleDate){box.find('.apply-btn').removeClass('disabled');dateRange=getDateString(new Date(opt.start));opt.setValue.call(selfDom,dateRange,getDateString(new Date(opt.start)),getDateString(new Date(opt.end)));if(initiated&&!silent){$(self).trigger('datepicker-change',{'value':dateRange,'date1':new Date(opt.start)})}}else if(opt.start&&opt.end){box.find('.selected-days').show().find('.selected-days-num').html(countDays(opt.end,opt.start));box.find('.apply-btn').removeClass('disabled');dateRange=getDateString(new Date(opt.start))+opt.separator+getDateString(new Date(opt.end));opt.setValue.call(selfDom,dateRange,getDateString(new Date(opt.start)),getDateString(new Date(opt.end)));if(initiated&&!silent){$(self).trigger('datepicker-change',{'value':dateRange,'date1':new Date(opt.start),'date2':new Date(opt.end)})}}else if(forceValid){box.find('.apply-btn').removeClass('disabled')}else{box.find('.apply-btn').addClass('disabled')}}
function countDays(start,end){return Math.abs(daysFrom1970(start)-daysFrom1970(end))+1}
function _setDateRange(date1,date2,silent){if(date1.getTime()>date2.getTime()){var tmp=date2;date2=date1;date1=tmp;tmp=null}
var valid=!0;if(opt.startDate&&compare_day(date1,opt.startDate)<0)valid=!1;if(opt.endDate&&compare_day(date2,opt.endDate)>0)valid=!1;if(!valid){showMonth(opt.startDate,'month1');showMonth(nextMonth(opt.startDate),'month2');showGap();return}
opt.start=date1.getTime();opt.end=date2.getTime();if(opt.time.enabled){renderTime('time1',date1);renderTime('time2',date2)}
if(opt.stickyMonths||compare_day(date1,date2)>0&&compare_month(date1,date2)===0){if(opt.lookBehind){date1=prevMonth(date2)}else{date2=nextMonth(date1)}}
if(opt.stickyMonths&&opt.endDate!==!1&&compare_month(date2,opt.endDate)>0){date1=prevMonth(date1);date2=prevMonth(date2)}
if(!opt.stickyMonths){if(compare_month(date1,date2)===0){if(opt.lookBehind){date1=prevMonth(date2)}else{date2=nextMonth(date1)}}}
showMonth(date1,'month1');showMonth(date2,'month2');showGap();checkSelectionValid();showSelectedInfo(!1,silent);autoclose()}
function setSingleDate(date1){var valid=!0;if(opt.startDate&&compare_day(date1,opt.startDate)<0)valid=!1;if(opt.endDate&&compare_day(date1,opt.endDate)>0)valid=!1;if(!valid){showMonth(opt.startDate,'month1');return}
opt.start=date1.getTime();if(opt.time.enabled){renderTime('time1',date1)}
showMonth(date1,'month1');if(opt.singleMonth!==!0){var date2=nextMonth(date1);showMonth(date2,'month2')}
showGap();showSelectedInfo();autoclose()}
function showSelectedDays(){if(!opt.start&&!opt.end)return;box.find('.day').each(function(){var time=parseInt($(this).attr('time')),start=opt.start,end=opt.end;if(opt.time.enabled){time=moment(time).startOf('day').valueOf();start=moment(start||moment().valueOf()).startOf('day').valueOf();end=moment(end||moment().valueOf()).startOf('day').valueOf()}
if(opt.start&&opt.end&&end>=time&&start<=time||opt.start&&!opt.end&&moment(start).format('YYYY-MM-DD')==moment(time).format('YYYY-MM-DD')){$(this).addClass('checked')}else{$(this).removeClass('checked')}
if(opt.start&&moment(start).format('YYYY-MM-DD')==moment(time).format('YYYY-MM-DD')){$(this).addClass('first-date-selected')}else{$(this).removeClass('first-date-selected')}
if(opt.end&&moment(end).format('YYYY-MM-DD')==moment(time).format('YYYY-MM-DD')){$(this).addClass('last-date-selected');box.find('.first-date-selected').addClass('checked-with-range')}else{$(this).removeClass('last-date-selected')}});box.find('.week-number').each(function(){if($(this).attr('data-start-time')==opt.startWeek){$(this).addClass('week-number-selected')}})}
function showMonth(date,month){date=moment(date).toDate();var monthName=nameMonth(date.getMonth());box.find('.'+month+' .month-name').html(monthName+' '+date.getFullYear());box.find('.'+month+' tbody').html(createMonthHTML(date));opt[month]=date;updateSelectableRange();bindDayEvents()}
function bindDayEvents(){box.find('.day').unbind("click").click(function(evt){evt.preventDefault();dayClicked($(this))});box.find('.day').unbind("mouseenter").mouseenter(function(evt){dayHovering($(this))});box.find('.day').unbind("mouseleave").mouseleave(function(evt){box.find('.date-range-length-tip').hide();if(opt.singleDate){clearHovering()}});box.find('.week-number').unbind("click").click(function(evt){weekNumberClicked($(this))})}
function showTime(date,name){box.find('.'+name).append(getTimeHTML());renderTime(name,date)}
function nameMonth(m){return lang('month-name')[m]}
function getDateString(d){return moment(d).format(opt.format)}
function showGap(){showSelectedDays();var m1=parseInt(moment(opt.month1).format('YYYYMM'));var m2=parseInt(moment(opt.month2).format('YYYYMM'));var p=Math.abs(m1-m2);var shouldShow=p>1&&p!=89;if(shouldShow){box.addClass('has-gap').removeClass('no-gap').find('.gap').css('visibility','visible')}else{box.removeClass('has-gap').addClass('no-gap').find('.gap').css('visibility','hidden')}
var h1=box.find('table.month1').height();var h2=box.find('table.month2').height();box.find('.gap').height(Math.max(h1,h2)+10)}
function closeDatePicker(){if(opt.alwaysOpen)return;var afterAnim=function afterAnim(){$(self).data('date-picker-opened',!1);$(self).trigger('datepicker-closed',{relatedTarget:box})};if(opt.customCloseAnimation){opt.customCloseAnimation.call(box.get(0),afterAnim)}else{$(box).slideUp(opt.duration,afterAnim)}
$(self).trigger('datepicker-close',{relatedTarget:box})}
function redrawDatePicker(){showMonth(opt.month1,'month1');showMonth(opt.month2,'month2')}
function compare_month(m1,m2){var p=parseInt(moment(m1).format('YYYYMM'))-parseInt(moment(m2).format('YYYYMM'));if(p>0)return 1;if(p===0)return 0;return-1}
function compare_day(m1,m2){var p=parseInt(moment(m1).format('YYYYMMDD'))-parseInt(moment(m2).format('YYYYMMDD'));if(p>0)return 1;if(p===0)return 0;return-1}
function nextMonth(month){return moment(month).add(1,'months').toDate()}
function prevMonth(month){return moment(month).add(-1,'months').toDate()}
function getTimeHTML(){return '<div>'+'<span>'+lang('Time')+': <span class="hour-val">00</span>:<span class="minute-val">00</span></span>'+'</div>'+'<div class="hour">'+'<label>'+lang('Hour')+': <input type="range" class="hour-range" name="hour" min="0" max="23"></label>'+'</div>'+'<div class="minute">'+'<label>'+lang('Minute')+': <input type="range" class="minute-range" name="minute" min="0" max="59"></label>'+'</div>'}
function createDom(){var html='<div class="date-picker-wrapper';if(opt.extraClass)html+=' '+opt.extraClass+' ';if(opt.singleDate)html+=' single-date ';if(!opt.showShortcuts)html+=' no-shortcuts ';if(!opt.showTopbar)html+=' no-topbar ';if(opt.customTopBar)html+=' custom-topbar ';html+='">';if(opt.showTopbar){html+='<div class="drp_top-bar">';if(opt.customTopBar){if(typeof opt.customTopBar=='function')opt.customTopBar=opt.customTopBar();html+='<div class="custom-top">'+opt.customTopBar+'</div>'}else{html+='<div class="normal-top">'+'<span style="color:#333">'+lang('selected')+' </span> <b class="start-day">...</b>';if(!opt.singleDate){html+=' <span class="separator-day">'+opt.separator+'</span> <b class="end-day">...</b> <i class="selected-days">(<span class="selected-days-num">3</span> '+lang('days')+')</i>'}
html+='</div>';html+='<div class="error-top">error</div>'+'<div class="default-top">default</div>'}
html+='<input type="button" class="apply-btn disabled'+getApplyBtnClass()+'" value="'+lang('apply')+'" />';html+='</div>'}
var _colspan=opt.showWeekNumbers?6:5;var arrowPrev='&lt;';if(opt.customArrowPrevSymbol)arrowPrev=opt.customArrowPrevSymbol;var arrowNext='&gt;';if(opt.customArrowNextSymbol)arrowNext=opt.customArrowNextSymbol;html+='<div class="month-wrapper">'+'   <table class="month1" cellspacing="0" border="0" cellpadding="0">'+'       <thead>'+'           <tr class="caption">'+'               <th style="width:27px;">'+'                   <a href="#" class="prev"><span class="sr-only">Previous month</span><span aria-hidden="true">'+arrowPrev+'                   </span></a>'+'               </th>'+'               <th colspan="'+_colspan+'" class="month-name">'+'               </th>'+'               <th style="width:27px;">'+(opt.singleDate||!opt.stickyMonths?'<a href="#" class="next"><span class="sr-only">Next month</span><span aria-hidden="true">'+arrowNext+'</span></a>':'')+'               </th>'+'           </tr>'+'           <tr class="week-name">'+getWeekHead()+'       </thead>'+'       <tbody></tbody>'+'   </table>';if(hasMonth2()){html+='<div class="gap">'+getGapHTML()+'</div>'+'<table class="month2" cellspacing="0" border="0" cellpadding="0">'+'   <thead>'+'   <tr class="caption">'+'       <th style="width:27px;">'+(!opt.stickyMonths?'<a href="#" class="prev"><span class="sr-only">Previous month</span><span aria-hidden="true"><'+arrowPrev+'</span></a>':'')+'       </th>'+'       <th colspan="'+_colspan+'" class="month-name">'+'       </th>'+'       <th style="width:27px;">'+'           <a href="#" class="next"><span class="sr-only">Next month</span><span aria-hidden="true">'+arrowNext+'</span></a>'+'       </th>'+'   </tr>'+'   <tr class="week-name">'+getWeekHead()+'   </thead>'+'   <tbody></tbody>'+'</table>'}
html+='<div style="clear:both;height:0;font-size:0;"></div>'+'<div class="time">'+'<div class="time1"></div>';if(!opt.singleDate){html+='<div class="time2"></div>'}
html+='</div>'+'<div style="clear:both;height:0;font-size:0;"></div>'+'</div>';html+='<div class="footer">';if(opt.showShortcuts){html+='<div class="shortcuts"><b>'+lang('shortcuts')+'</b>';var data=opt.shortcuts;if(data){var name;if(data['prev-days']&&data['prev-days'].length>0){html+='&nbsp;<span class="prev-days">'+lang('past');for(var i=0;i<data['prev-days'].length;i++){name=data['prev-days'][i];name+=data['prev-days'][i]>1?lang('days'):lang('day');html+=' <a href="javascript:;" shortcut="day,-'+data['prev-days'][i]+'">'+name+'</a>'}
html+='</span>'}
if(data['next-days']&&data['next-days'].length>0){html+='&nbsp;<span class="next-days">'+lang('following');for(var i=0;i<data['next-days'].length;i++){name=data['next-days'][i];name+=data['next-days'][i]>1?lang('days'):lang('day');html+=' <a href="javascript:;" shortcut="day,'+data['next-days'][i]+'">'+name+'</a>'}
html+='</span>'}
if(data.prev&&data.prev.length>0){html+='&nbsp;<span class="prev-buttons">'+lang('previous');for(var i=0;i<data.prev.length;i++){name=lang('prev-'+data.prev[i]);html+=' <a href="javascript:;" shortcut="prev,'+data.prev[i]+'">'+name+'</a>'}
html+='</span>'}
if(data.next&&data.next.length>0){html+='&nbsp;<span class="next-buttons">'+lang('next');for(var i=0;i<data.next.length;i++){name=lang('next-'+data.next[i]);html+=' <a href="javascript:;" shortcut="next,'+data.next[i]+'">'+name+'</a>'}
html+='</span>'}}
if(opt.customShortcuts){for(var i=0;i<opt.customShortcuts.length;i++){var sh=opt.customShortcuts[i];html+='&nbsp;<span class="custom-shortcut"><a href="javascript:;" shortcut="custom">'+sh.name+'</a></span>'}}
html+='</div>'}
if(opt.showCustomValues){html+='<div class="customValues"><b>'+(opt.customValueLabel||lang('custom-values'))+'</b>';if(opt.customValues){for(var i=0;i<opt.customValues.length;i++){var val=opt.customValues[i];html+='&nbsp;<span class="custom-value"><a href="javascript:;" custom="'+val.value+'">'+val.name+'</a></span>'}}}
html+='</div></div>';return $(html)}
function getApplyBtnClass(){var klass='';if(opt.autoClose===!0){klass+=' hide'}
if(opt.applyBtnClass!==''){klass+=' '+opt.applyBtnClass}
return klass}
function getWeekHead(){var prepend=opt.showWeekNumbers?'<th>'+lang('week-number')+'</th>':'';if(opt.startOfWeek=='monday'){return prepend+'<th>'+lang('week-1')+'</th>'+'<th>'+lang('week-2')+'</th>'+'<th>'+lang('week-3')+'</th>'+'<th>'+lang('week-4')+'</th>'+'<th>'+lang('week-5')+'</th>'+'<th>'+lang('week-6')+'</th>'+'<th>'+lang('week-7')+'</th>'}else{return prepend+'<th>'+lang('week-7')+'</th>'+'<th>'+lang('week-1')+'</th>'+'<th>'+lang('week-2')+'</th>'+'<th>'+lang('week-3')+'</th>'+'<th>'+lang('week-4')+'</th>'+'<th>'+lang('week-5')+'</th>'+'<th>'+lang('week-6')+'</th>'}}
function isMonthOutOfBounds(month){month=moment(month);if(opt.startDate&&month.endOf('month').isBefore(opt.startDate)){return!0}
if(opt.endDate&&month.startOf('month').isAfter(opt.endDate)){return!0}
return!1}
function getGapHTML(){var html=['<div class="gap-top-mask"></div><div class="gap-bottom-mask"></div><div class="gap-lines">'];for(var i=0;i<20;i++){html.push('<div class="gap-line">'+'<div class="gap-1"></div>'+'<div class="gap-2"></div>'+'<div class="gap-3"></div>'+'</div>')}
html.push('</div>');return html.join('')}
function hasMonth2(){return!opt.singleMonth}
function attributesCallbacks(initialObject,callbacksArray,today){var resultObject=$.extend(!0,{},initialObject);$.each(callbacksArray,function(cbAttrIndex,cbAttr){var addAttributes=cbAttr(today);for(var attr in addAttributes){if(resultObject.hasOwnProperty(attr)){resultObject[attr]+=addAttributes[attr]}else{resultObject[attr]=addAttributes[attr]}}});var attrString='';for(var attr in resultObject){if(resultObject.hasOwnProperty(attr)){attrString+=attr+'="'+resultObject[attr]+'" '}}
return attrString}
function daysFrom1970(t){return Math.floor(toLocalTimestamp(t)/86400000)}
function toLocalTimestamp(t){if(moment.isMoment(t))t=t.toDate().getTime();if((typeof t==='undefined'?'undefined':_typeof(t))=='object'&&t.getTime)t=t.getTime();if(typeof t=='string'&&!t.match(/\d{13}/))t=moment(t,opt.format).toDate().getTime();t=parseInt(t,10)-new Date().getTimezoneOffset()*60*1000;return t}
function createMonthHTML(d){var days=[];d.setDate(1);var lastMonth=new Date(d.getTime()-86400000);var now=new Date();var dayOfWeek=d.getDay();if(dayOfWeek===0&&opt.startOfWeek==='monday'){dayOfWeek=7}
var today,valid;if(dayOfWeek>0){for(var i=dayOfWeek;i>0;i--){var day=new Date(d.getTime()-86400000*i);valid=isValidTime(day.getTime());if(opt.startDate&&compare_day(day,opt.startDate)<0)valid=!1;if(opt.endDate&&compare_day(day,opt.endDate)>0)valid=!1;days.push({date:day,type:'lastMonth',day:day.getDate(),time:day.getTime(),valid:valid})}}
var toMonth=d.getMonth();for(var i=0;i<40;i++){today=moment(d).add(i,'days').toDate();valid=isValidTime(today.getTime());if(opt.startDate&&compare_day(today,opt.startDate)<0)valid=!1;if(opt.endDate&&compare_day(today,opt.endDate)>0)valid=!1;days.push({date:today,type:today.getMonth()==toMonth?'toMonth':'nextMonth',day:today.getDate(),time:today.getTime(),valid:valid})}
var html=[];for(var week=0;week<6;week++){if(days[week*7].type=='nextMonth')break;html.push('<tr>');for(var day=0;day<7;day++){var _day=opt.startOfWeek=='monday'?day+1:day;today=days[week*7+_day];var highlightToday=moment(today.time).format('L')==moment(now).format('L');today.extraClass='';today.tooltip='';if(today.valid&&opt.beforeShowDay&&typeof opt.beforeShowDay=='function'){var _r=opt.beforeShowDay(moment(today.time).toDate());today.valid=_r[0];today.extraClass=_r[1]||'';today.tooltip=_r[2]||'';if(today.tooltip!=='')today.extraClass+=' has-tooltip '}
var todayDivAttr={time:today.time,'data-tooltip':today.tooltip,'class':'day '+today.type+' '+today.extraClass+' '+(today.valid?'valid':'invalid')+' '+(highlightToday?'real-today':'')};if(day===0&&opt.showWeekNumbers){html.push('<td><div class="week-number" data-start-time="'+today.time+'"><a href="#" class="inner">'+opt.getWeekNumber(today.date)+'</a></div></td>')}
html.push('<td '+attributesCallbacks({},opt.dayTdAttrs,today)+'><div '+attributesCallbacks(todayDivAttr,opt.dayDivAttrs,today)+'><a href="#" class="inner">'+showDayHTML(today.time,today.day)+'</a></div></td>')}
html.push('</tr>')}
return html.join('')}
function showDayHTML(time,date){if(opt.showDateFilter&&typeof opt.showDateFilter=='function')return opt.showDateFilter(time,date);return date}
function getLanguages(){if(opt.language=='auto'){var language=navigator.language?navigator.language:navigator.browserLanguage;if(!language)return $.dateRangePickerLanguages['default'];language=language.toLowerCase();for(var key in $.dateRangePickerLanguages){if(language.indexOf(key)!==-1){return $.dateRangePickerLanguages[key]}}
return $.dateRangePickerLanguages['default']}else if(opt.language&&opt.language in $.dateRangePickerLanguages){return $.dateRangePickerLanguages[opt.language]}else{return $.dateRangePickerLanguages['default']}}
function lang(t){var _t=t.toLowerCase();var re=t in langs?langs[t]:_t in langs?langs[_t]:null;var defaultLanguage=$.dateRangePickerLanguages['default'];if(re==null)re=t in defaultLanguage?defaultLanguage[t]:_t in defaultLanguage?defaultLanguage[_t]:'';return re}
function getDefaultTime(){var defaultTime=opt.defaultTime?opt.defaultTime:new Date();if(opt.lookBehind){if(opt.startDate&&compare_month(defaultTime,opt.startDate)<0)defaultTime=nextMonth(moment(opt.startDate).toDate());if(opt.endDate&&compare_month(defaultTime,opt.endDate)>0)defaultTime=moment(opt.endDate).toDate()}else{if(opt.startDate&&compare_month(defaultTime,opt.startDate)<0)defaultTime=moment(opt.startDate).toDate();if(opt.endDate&&compare_month(nextMonth(defaultTime),opt.endDate)>0)defaultTime=prevMonth(moment(opt.endDate).toDate())}
if(opt.singleDate){if(opt.startDate&&compare_month(defaultTime,opt.startDate)<0)defaultTime=moment(opt.startDate).toDate();if(opt.endDate&&compare_month(defaultTime,opt.endDate)>0)defaultTime=moment(opt.endDate).toDate()}
return defaultTime}
function resetMonthsView(time){if(!time){time=getDefaultTime()}
if(opt.lookBehind){showMonth(prevMonth(time),'month1');showMonth(time,'month2')}else{showMonth(time,'month1');showMonth(nextMonth(time),'month2')}
if(opt.singleDate){showMonth(time,'month1')}
showSelectedDays();showGap()}}});'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};(function($,undef){if($.fn.dotdotdot){return}
$.fn.dotdotdot=function(o){if(this.length==0){$.fn.dotdotdot.debug('No element found for "'+this.selector+'".');return this}
if(this.length>1){return this.each(function(){$(this).dotdotdot(o)})}
var $dot=this;var orgContent=$dot.contents();if($dot.data('dotdotdot')){$dot.trigger('destroy.dot')}
$dot.data('dotdotdot-style',$dot.attr('style')||'');$dot.css('word-wrap','break-word');if($dot.css('white-space')==='nowrap'){$dot.css('white-space','normal')}
$dot.bind_events=function(){$dot.bind('update.dot',function(e,c){$dot.removeClass("is-truncated");e.preventDefault();e.stopPropagation();switch(_typeof(opts.height)){case 'number':opts.maxHeight=opts.height;break;case 'function':opts.maxHeight=opts.height.call($dot[0]);break;default:opts.maxHeight=getTrueInnerHeight($dot);break}
opts.maxHeight+=opts.tolerance;if(typeof c!='undefined'){if(typeof c=='string'||'nodeType' in c&&c.nodeType===1){c=$('<div />').append(c).contents()}
if(c instanceof $){orgContent=c}}
$inr=$dot.wrapInner('<div class="dotdotdot" />').children();$inr.contents().detach().end().append(orgContent.clone(!0)).find('br').replaceWith('  <br />  ').end().css({'height':'auto','width':'auto','border':'none','padding':0,'margin':0});var after=!1,trunc=!1;if(conf.afterElement){after=conf.afterElement.clone(!0);after.show();conf.afterElement.detach()}
if(test($inr,opts)){if(opts.wrap=='children'){trunc=children($inr,opts,after)}else{trunc=ellipsis($inr,$dot,$inr,opts,after)}}
$inr.replaceWith($inr.contents());$inr=null;if($.isFunction(opts.callback)){opts.callback.call($dot[0],trunc,orgContent)}
conf.isTruncated=trunc;return trunc}).bind('isTruncated.dot',function(e,fn){e.preventDefault();e.stopPropagation();if(typeof fn=='function'){fn.call($dot[0],conf.isTruncated)}
return conf.isTruncated}).bind('originalContent.dot',function(e,fn){e.preventDefault();e.stopPropagation();if(typeof fn=='function'){fn.call($dot[0],orgContent)}
return orgContent}).bind('destroy.dot',function(e){e.preventDefault();e.stopPropagation();$dot.unwatch().unbind_events().contents().detach().end().append(orgContent).attr('style',$dot.data('dotdotdot-style')||'').removeClass('is-truncated').data('dotdotdot',!1)});return $dot};$dot.unbind_events=function(){$dot.unbind('.dot');return $dot};$dot.watch=function(){$dot.unwatch();if(opts.watch=='window'){var $window=$(window),_wWidth=$window.width(),_wHeight=$window.height();$window.bind('resize.dot'+conf.dotId,function(){if(_wWidth!=$window.width()||_wHeight!=$window.height()||!opts.windowResizeFix){_wWidth=$window.width();_wHeight=$window.height();if(watchInt){clearInterval(watchInt)}
watchInt=setTimeout(function(){$dot.trigger('update.dot')},100)}})}else{watchOrg=getSizes($dot);watchInt=setInterval(function(){if($dot.is(':visible')){var watchNew=getSizes($dot);if(watchOrg.width!=watchNew.width||watchOrg.height!=watchNew.height){$dot.trigger('update.dot');watchOrg=watchNew}}},500)}
return $dot};$dot.unwatch=function(){$(window).unbind('resize.dot'+conf.dotId);if(watchInt){clearInterval(watchInt)}
return $dot};var opts=$.extend(!0,{},$.fn.dotdotdot.defaults,o),conf={},watchOrg={},watchInt=null,$inr=null;if(!(opts.lastCharacter.remove instanceof Array)){opts.lastCharacter.remove=$.fn.dotdotdot.defaultArrays.lastCharacter.remove}
if(!(opts.lastCharacter.noEllipsis instanceof Array)){opts.lastCharacter.noEllipsis=$.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis}
conf.afterElement=getElement(opts.after,$dot);conf.isTruncated=!1;conf.dotId=dotId++;$dot.data('dotdotdot',!0).bind_events().trigger('update.dot');if(opts.watch){$dot.watch()}
return $dot};$.fn.dotdotdot.defaults={'ellipsis':'... ','wrap':'word','fallbackToLetter':!0,'lastCharacter':{},'tolerance':0,'callback':null,'after':null,'height':null,'watch':!1,'windowResizeFix':!0};$.fn.dotdotdot.defaultArrays={'lastCharacter':{'remove':[' ','\u3000',',',';','.','!','?'],'noEllipsis':[]}};$.fn.dotdotdot.debug=function(msg){};var dotId=1;function children($elem,o,after){var $elements=$elem.children(),isTruncated=!1;$elem.empty();for(var a=0,l=$elements.length;a<l;a++){var $e=$elements.eq(a);$elem.append($e);if(after){$elem.append(after)}
if(test($elem,o)){$e.remove();isTruncated=!0;break}else{if(after){after.detach()}}}
return isTruncated}
function ellipsis($elem,$d,$i,o,after){var isTruncated=!1;var notx='a, table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style';var noty='script, .dotdotdot-keep';$elem.contents().detach().each(function(){var e=this,$e=$(e);if(typeof e=='undefined'){return!0}else if($e.is(noty)){$elem.append($e)}else if(isTruncated){return!0}else{$elem.append($e);if(after&&!$e.is(o.after)&&!$e.find(o.after).length){$elem[$elem.is(notx)?'after':'append'](after)}
if(test($i,o)){if(e.nodeType==3)
{isTruncated=ellipsisElement($e,$d,$i,o,after)}else{isTruncated=ellipsis($e,$d,$i,o,after)}}
if(!isTruncated){if(after){after.detach()}}}});$d.addClass("is-truncated");return isTruncated}
function ellipsisElement($e,$d,$i,o,after){var e=$e[0];if(!e){return!1}
var txt=getTextContent(e),space=txt.indexOf(' ')!==-1?' ':'\u3000',separator=o.wrap=='letter'?'':space,textArr=txt.split(separator),position=-1,midPos=-1,startPos=0,endPos=textArr.length-1;if(o.fallbackToLetter&&startPos==0&&endPos==0){separator='';textArr=txt.split(separator);endPos=textArr.length-1}
while(startPos<=endPos&&!(startPos==0&&endPos==0)){var m=Math.floor((startPos+endPos)/2);if(m==midPos){break}
midPos=m;setTextContent(e,textArr.slice(0,midPos+1).join(separator)+o.ellipsis);$i.children().each(function(){$(this).toggle().toggle()});if(!test($i,o)){position=midPos;startPos=midPos}else{endPos=midPos;if(o.fallbackToLetter&&startPos==0&&endPos==0){separator='';textArr=textArr[0].split(separator);position=-1;midPos=-1;startPos=0;endPos=textArr.length-1}}}
if(position!=-1&&!(textArr.length==1&&textArr[0].length==0)){txt=addEllipsis(textArr.slice(0,position+1).join(separator),o);setTextContent(e,txt)}else{var $w=$e.parent();$e.detach();var afterLength=after&&after.closest($w).length?after.length:0;if($w.contents().length>afterLength){e=findLastTextNode($w.contents().eq(-1-afterLength),$d)}else{e=findLastTextNode($w,$d,!0);if(!afterLength){$w.detach()}}
if(e){txt=addEllipsis(getTextContent(e),o);setTextContent(e,txt);if(afterLength&&after){var $parent=after.parent();$(e).parent().append(after);if(!$.trim($parent.html())){$parent.remove()}}}}
return!0}
function test($i,o){return $i.innerHeight()>o.maxHeight}
function addEllipsis(txt,o){while($.inArray(txt.slice(-1),o.lastCharacter.remove)>-1){txt=txt.slice(0,-1)}
if($.inArray(txt.slice(-1),o.lastCharacter.noEllipsis)<0){txt+=o.ellipsis}
return txt}
function getSizes($d){return{'width':$d.innerWidth(),'height':$d.innerHeight()}}
function setTextContent(e,content){if(e.innerText){e.innerText=content}else if(e.nodeValue){e.nodeValue=content}else if(e.textContent){e.textContent=content}}
function getTextContent(e){if(e.innerText){return e.innerText}else if(e.nodeValue){return e.nodeValue}else if(e.textContent){return e.textContent}else{return ""}}
function getPrevNode(n){do{n=n.previousSibling}while(n&&n.nodeType!==1&&n.nodeType!==3);return n}
function findLastTextNode($el,$top,excludeCurrent){var e=$el&&$el[0],p;if(e){if(!excludeCurrent){if(e.nodeType===3){return e}
if($.trim($el.text())){return findLastTextNode($el.contents().last(),$top)}}
p=getPrevNode(e);while(!p){$el=$el.parent();if($el.is($top)||!$el.length){return!1}
p=getPrevNode($el[0])}
if(p){return findLastTextNode($(p),$top)}}
return!1}
function getElement(e,$i){if(!e){return!1}
if(typeof e==='string'){e=$(e,$i);return e.length?e:!1}
return!e.jquery?!1:e}
function getTrueInnerHeight($el){var h=$el.innerHeight(),a=['paddingTop','paddingBottom'];for(var z=0,l=a.length;z<l;z++){var m=parseInt($el.css(a[z]),10);if(isNaN(m)){m=0}
h-=m}
return h}
var _orgHtml=$.fn.html;$.fn.html=function(str){if(str!=undef&&!$.isFunction(str)&&this.data('dotdotdot')){return this.trigger('update',[str])}
return _orgHtml.apply(this,arguments)};var _orgText=$.fn.text;$.fn.text=function(str){if(str!=undef&&!$.isFunction(str)&&this.data('dotdotdot')){str=$('<div />').text(str).html();return this.trigger('update',[str])}
return _orgText.apply(this,arguments)}})(jQuery);jQuery(document).ready(function($){$(".dot-ellipsis").each(function(){var watch_window=$(this).hasClass("dot-resize-update");var watch_timer=$(this).hasClass("dot-timer-update");var height=0;var classList=$(this).attr('class').split(/\s+/);$.each(classList,function(index,item){var matchResult=item.match(/^dot-height-(\d+)$/);if(matchResult!==null)height=Number(matchResult[1])});var x=new Object();if(watch_timer)x.watch=!0;if(watch_window)x.watch='window';if(height>0)x.height=height;$(this).dotdotdot(x)})});jQuery(window).on('load',function(){jQuery(".dot-ellipsis.dot-load-update").trigger("update.dot")});'use strict';var breakpointSmall=480;var breakpointMedium=768;var mn=$('.menu');var mns='main-nav-scrolled';var hdr=$('.banner').height();var pointerEvent=Modernizr.touch&&screen.width<=breakpointMedium?'touchend':'click';$(function(){var element=$('button, a, .uk-link, .uk-button');var elementEvent=Modernizr.touch&&screen.width<=breakpointMedium?'touchend':'mouseup';element.on(elementEvent,function(){$(this).trigger('blur')})});$(function(){$('input, textarea').placeholder()});$(function(){$('.uk-slidenav-position').each(function(){UIkit.slider($(this),{center:!0})})});$(function(){if(!Modernizr.touch&&screen.width>=breakpointMedium){$('.uk-notouch [data-tooltip-non-touch]').each(function(){UIkit.tooltip($(this),{})})}});$(function(){$('[data-search-section]').each(function(){var $this=$(this);var radios=$this.find('[type="radio"]');radios.on('change',function(){if($(this).is(':checked')){$this.find('[type="radio"]').not($(this)).prop('checked',!1)}})})});$(function(){var search=document.querySelector('.search');var login=document.querySelector('.login-wrap');var close=search.querySelector('.button-close');var buttonSearch=document.querySelector('.button-search');var buttonSearchTab=buttonSearch.getAttribute('tabindex');var buttonLogin=document.querySelector('.button-login');var buttonLoginTab=buttonLogin.getAttribute('tabindex');var buttonJoin=document.querySelector('.button-join');var buttonJoinTab=buttonJoin.getAttribute('tabindex');var navItem=$('.uk-navbar-nav > li > a');var main=$('.main, .main-nav-container, .search, .login-wrap');var mainAll=$('.main *, .main-nav-container *, .search *, .login-wrap *');var genericButtonLogin=document.querySelectorAll('[data-login-toggle]');$('.login-form').submit(function(e){e.preventDefault()});$('.top-button').on(pointerEvent,function(e){e.preventDefault();$('#s4-workspace').animate({scrollTop:0},1000)});if($('.search').hasClass('uk-hidden')){buttonSearch.removeAttribute('tabindex');buttonLogin.removeAttribute('tabindex');buttonJoin.removeAttribute('tabindex')}
function toggleSearch(){var search=$('.search');$('.login-wrap').addClass('uk-hidden');$('.button-login').removeClass('active');$('.button-search').toggleClass('active');search.toggleClass('uk-hidden');if(!search.hasClass('uk-hidden')){$('#search').focus();buttonSearch.setAttribute('tabindex',buttonSearchTab);buttonLogin.setAttribute('tabindex',buttonLoginTab);buttonJoin.setAttribute('tabindex',buttonJoinTab)}else{buttonSearch.removeAttribute('tabindex');buttonLogin.removeAttribute('tabindex');buttonJoin.removeAttribute('tabindex')}}
function toggleLogin(){var login=$('.button-login');$('.login-wrap').toggleClass('uk-hidden');$('.search').addClass('uk-hidden');$('.button-search').removeClass('active');login.toggleClass('active');if(!login.hasClass('uk-hidden')){$('#username-2').focus();buttonSearch.setAttribute('tabindex',buttonSearchTab);buttonLogin.setAttribute('tabindex',buttonJoinTab+1);buttonJoin.setAttribute('tabindex',buttonJoinTab+2)}else{buttonSearch.removeAttribute('tabindex');buttonLogin.removeAttribute('tabindex');buttonJoin.removeAttribute('tabindex')}}
function closeBoth(){$('.login-wrap').addClass('uk-hidden');$('.search').addClass('uk-hidden');$('.button-login').removeClass('active');$('.button-search').removeClass('active')}
close.addEventListener(pointerEvent,closeBoth,!1);buttonSearch.addEventListener(pointerEvent,toggleSearch,!1);buttonLogin.addEventListener(pointerEvent,toggleLogin,!1);for(var i=0;i<genericButtonLogin.length;i++){genericButtonLogin[i].addEventListener(pointerEvent,function(e){e.preventDefault();toggleLogin();if(!$('.login-wrap').hasClass('uk-hidden')){$('html, body').animate({scrollTop:0},1000)}},!1)}
function closeNav(){var navItems=$('.uk-navbar-nav > li > a');navItems.each(function(){var parentItem=$(this).parent();parentItem.removeClass('active');parentItem.find('.drop ul').attr('aria-expanded',!1)})}
function rollOver(el){closeNav();var parentLi=el.parent();parentLi.addClass('active');parentLi.find('.drop ul').attr('aria-expanded',!0)}
var hoverTimer=void 0;navItem.hover(function(){var _this=this;hoverTimer=setTimeout(function(){rollOver($(_this))},250)},function(){clearTimeout(hoverTimer)});navItem.focus(function(){rollOver($(this))});navItem.on(pointerEvent,function(){rollOver($(this))});main.hover(function(){closeNav()});mainAll.focus(function(){closeNav()});function expandMenu(el){el.toggleClass('rotate');el.prev().toggleClass('open');$('.nav-circle').each(function(){var al=$(this);if(!el.is(al)){al.removeClass('rotate');al.prev().removeClass('open');al.next().slideUp()}});el.next().slideToggle()}
$('.nav-circle').on(pointerEvent,function(e){e.preventDefault();var el=$(this);expandMenu(el)})});$(function(){$('[data-feedback-form]').each(function(){var btn=$(this).find('.feedback-buttons button');var form=$(this).find('.feedback-form');btn.on(pointerEvent,function(){$('.feedback-buttons').find('button').removeClass('active');$(this).addClass('active');form.show()})})});$(function(){$('[data-autocomplete-form]').each(function(){var text=$(this).find('input:not([type=reset])');var reset=$(this).find('[type=reset]');text.on('focus',function(){reset.addClass('focus')}).on('blur',function(){reset.removeClass('focus')})})});$(function(){$('[data-remove-draw]').each(function(){var parent=$(this).parents('.section--favourites');$(this).on(pointerEvent,function(e){e.preventDefault();parent.remove()})})});$(function(){$('.tag-wrap').each(function(){var initTotalNumber=$(this).data('load-init');var tag=$(this).find('.tag-button-wrap');var totalNumber=tag.length;var loadMoreButton=$('<div class="tag-button-wrap"><button class="tag-load-more tag-button">+ Load more...</button></div>');if(totalNumber>initTotalNumber){$(this).append(loadMoreButton);tag.slice(initTotalNumber+1).addClass('uk-hidden')}
$(this).find('.tag-load-more').on(pointerEvent,function(e){e.preventDefault();var $this=$(this);tag.removeClass('uk-hidden');$this.parent().remove();tag.eq(initTotalNumber+1).find('input').focus()})})});var sm=$('.site-menu');$(window).scroll(function(){if($(this).scrollTop()>hdr){if($('.site-wrapper').hasClass('show-nav')){mn.addClass(mns);sm.addClass(mns);sm.css('overflow-y','auto')}}else{mn.removeClass(mns);sm.removeClass(mns);sm.css('overflow-y','initial')}});$(function(){$(document).on(pointerEvent,'.menu a, .overlay.locked',function(e){e.preventDefault();$('.site-wrapper').removeClass('show-nav');$('.toggle-nav.button-menu').removeClass('uk-hidden');$('.main-nav-scrolled .toggle-nav').addClass('uk-hidden');sm.removeClass(mns);$('.overlay').removeClass('locked');$('html, body').removeClass('noscroll');$('.nav-circle').removeClass('rotate').next().hide();sm.animate({scrollTop:0},0)});$(document).on(pointerEvent,'.toggle-nav.button-menu',function(e){e.preventDefault();$('.site-wrapper').addClass('show-nav');$('.overlay').addClass('locked');$('.toggle-nav.button-menu').addClass('uk-hidden');$('.menu a').removeClass('uk-hidden');$('html, body').addClass('noscroll');sm.animate({scrollTop:0},0)})});$(function(){$('[name=show-password]').click(function(){var password=$(this).parents('.login').find('.password');if(password.attr('type')==='password'){password.attr('type','text')}else{password.attr('type','password')}})});$(function(){function dateInit(el,multiple,parent,dateStart,dateEnd){if($(window).width()>=breakpointSmall){el.on('focus',function(){el.addClass('focus')}).on('blur',function(){el.removeClass('focus')}).attr('type','text')}else{el.attr('type','date');if(multiple){parent.data('dateRangePicker').destroy();dateStart.on('blur',function(){dateEnd.removeAttr('min');if($(this).val()){var date=moment($(this).val()).format('YYYY-MM-DD');dateEnd.attr('min',date)}})}else{el.data('dateRangePicker').destroy()}}
var input=multiple?parent:el;$(window).keyup(function(e){var code=e.keyCode?e.keyCode:e.which;if(el.is(':focus')){if(code==27){input.data('dateRangePicker').close()}
if(code==9){input.data('dateRangePicker').open()}}}).keydown(function(e){var code=e.keyCode?e.keyCode:e.which;if(el.is(':focus')&&code==9&&e.shiftKey){if(dateEnd!==undefined){if(!dateEnd.is(':focus')){input.data('dateRangePicker').close()}}else{input.data('dateRangePicker').close()}}})}
$('[data-date]').each(function(){var $this=$(this);var dateInput=$this.find('input');dateInput.dateRangePicker({showTopbar:!1,language:'custom',format:'DD/MM/YYYY',autoClose:!0,showShortcuts:!1,singleMonth:!0,singleDate:!0,container:$this,customOpenAnimation:function customOpenAnimation(cb){$(this).show()},customCloseAnimation:function customCloseAnimation(cb){$(this).hide()}}).on('datepicker-open',function(){$this.addClass('datepicker-open')}).on('datepicker-close',function(){$this.removeClass('datepicker-open')});$(window).on('resize',function(){dateInit(dateInput,!1)}).trigger('resize')});$('[data-date-range]').each(function(){var $this=$(this);var dateInput=$this.find('input');var dateStart=$this.find('[data-date-start]');var dateEnd=$this.find('[data-date-end]');$this.dateRangePicker({language:'custom',format:'DD/MM/YYYY',autoClose:!0,selectForward:!0,getValue:function getValue(s,s1,s2){if(dateStart.val()&&dateEnd.val()){return dateStart.val()+' to '+dateEnd.val()}else{return ''}},container:$this,setValue:function setValue(s,s1,s2){dateStart.val(s1);dateEnd.val(s2)},showShortcuts:!1,customOpenAnimation:function customOpenAnimation(cb){$(this).show()},customCloseAnimation:function customCloseAnimation(cb){$(this).hide()}}).on('datepicker-open',function(){$this.addClass('datepicker-open')}).on('datepicker-close',function(){$this.removeClass('datepicker-open')});dateInit(dateInput,!0,$this,dateStart,dateEnd);$(window).resize(function(){dateInit(dateInput,!0,$this,dateStart,dateEnd)})})});$(function(){$('.box').each(function(){var $form=$(this).find('.inner');var $input=$form.find('input[type="file"]');var $label=$form.find('label');var $undoBtn=$form.find('#undo');var uploadBtn=$form.find('.uk-button');$(this).on('keyup',function(e){if(e.which===13&&uploadBtn.is(':focus')){$input.trigger('click');return!1}});if(Modernizr.draganddrop){$form.on('drag dragstart dragend dragover dragenter dragleave drop',function(e){e.preventDefault();e.stopPropagation()}).on('dragover dragenter',function(){$form.addClass('is-dragover')}).on('dragleave dragend drop',function(){$form.removeClass('is-dragover')})}
$input.on('focus',function(){$input.addClass('has-focus')}).on('blur',function(){$input.removeClass('has-focus')})})});function equalFooterHeights(){$('[data-slider-footer-height]').each(function(){var slider=$(this);var item=slider.find('.uk-thumbnail');var footer=slider.find('footer');var maxHeight=0;var maxPadding=0;$.fn.footerHeight=function(){maxHeight=Math.max.apply(null,$(this).map(function(){return $(this).height()}).get());maxPadding=Math.max.apply(null,$(this).map(function(){return $(this).outerHeight()}).get());$(this).height(maxHeight);item.css('padding-bottom',maxPadding)};footer.footerHeight()})}
function equalCaptionSlider(){$('[data-slider-caption-height]').each(function(){var heading=$(this).find('.heading');var captionHeading=$(this).find('.caption .heading');heading.dotdotdot({ellipsis:'...',watch:'window'});captionHeading.dotdotdot({ellipsis:'...',watch:'window',height:'32px',fallbackToLetter:!0,tolerance:'16px'})})}
$.fn.captionHeight=function(){var maxHeight=Math.max.apply(null,$(this).map(function(){return $(this).height()}).get());$(this).height(maxHeight)};$.fn.captionGridHeight=function(){var caption=$(this).find('div.uk-thumbnail-caption');var captionFooter=$(this).find('footer.uk-thumbnail-caption');var maxHeight=Math.max.apply(null,$(this).map(function(){return caption.find('.thumnail-heading').height()+caption.find('.thumbnail-subheading').height()+65}).get());var maxHeight2=Math.max.apply(null,$(this).map(function(){return captionFooter.find('h5').height()+captionFooter.find('h4').height()+captionFooter.find('p').height()+20}).get());caption.height(maxHeight);captionFooter.height(maxHeight2)};function equalCaption(){$('[data-grid-height]').each(function(){var captions=$(this).find('.grid-item:visible .uk-thumbnail');captions.captionGridHeight()})}
function equalGridHeight(){$('.uk-grid[data-grid-height]').each(function(){var caption=$(this).find('.grid-item:visible div.uk-thumbnail-caption');var footerCaption=$(this).find('.grid-item:visible footer.uk-thumbnail-caption');caption.captionHeight();footerCaption.captionHeight()})}
function equal(){$.fn.captionHeight();$.fn.captionGridHeight();equalCaption();equalGridHeight();equalCaptionSlider();equalFooterHeights();resizeGridCaption()}
$(window).on('resize load orientationchange',function(){equal()}).trigger('resize load orientationchange');$(window).resize(function(){equal()});$(function(){$('[data-share-wrap]').each(function(){var $this=$(this);var btn=$this.find('[data-share-toggle]');btn.on(pointerEvent,function(){btn.toggleClass('open');var shareBox=$this.find('[data-share-popup]');shareBox.toggleClass('open');if(shareBox.hasClass('open')){shareBox.attr('aria-hidden',!1);$(this).blur()}else{shareBox.attr('aria-hidden',!0)}});$(document).on(pointerEvent,function(e){var shareBox=$this.find('[data-share-popup]');if(!btn.is(e.target)&&btn.has(event.target).length===0&&!shareBox.is(e.target)&&shareBox.has(event.target).length===0){btn.removeClass('open');shareBox.removeClass('open');shareBox.attr('aria-hidden',!0)}})})});var index=0;var loadMore=function loadMore(value){var imageList='';$.each(value.images,function(j,item){var type=void 0;switch(j){case 0:type='first';break;case 1:type='second';break;case 2:type='third';break}
imageList+='<img src="'+item.imageName+'" class="thumbnail-'+type+'" alt="'+item.imageTitle+'">'});index++;return '<div class="uk-width-small-1-2">\n      <a href="'+value.link+'" class="thumbnail-image-multiple-wrapper poster-index-'+index+'" tabindex="0">\n        <div class="thumbnail-image-multiple">'+imageList+'</div>\n        <div class="thumbnail-image-multiple-caption">\n          <h4 class="thumbnail-heading">'+value.heading+'</h4>\n        </div>\n      </a>\n    </div>'};var index2=0;var loadMore2=function loadMore2(v){var list='';index2++;if(v.format=='DVD'||v.format=='CD'){list+='<div class="view-item view-item-cd-dvd">'}else{list+='<div class="view-item">'}
list+='<div class="inner"><div class="uk-thumbnail thumbnail-horizontal-large">';if(v.format=='DVD'){list+='<div class="view-image-wrap item-dvd">'}else{list+='<div class="view-image-wrap">'}
if(v.format!='DVD'&&v.format!='CD'){list+='<a href="https://discover.elgar.govt.nz/iii/encore/record/C__R+'+v.bibNo+'" target="_blank">\n      <img src="images/book-covers/'+v.imageName+'" alt="'+v.bookName+'">\n      </a>'}
list+='</div>\n        <div class="caption" data-grid-caption-height>\n          <h4 class="heading">\n            <a tabindex="0" href="https://discover.elgar.govt.nz/iii/encore/record/C__R+'+v.bibNo+'" target="_blank">\n              '+v.bookName+'\n            </a>\n          </h4>\n          <a href="http://www.google.com" target="_blank" class="pa" tabindex="0">'+v.authorName+'</a>\n          <p><strong class="format">'+v.format+'</strong></p>\n          <p class="text">'+v.text+'</p>\n        </div>\n      </div>\n      <button class="uk-button uk-button-primary" tabindex="0">Request</button>\n    </div>\n  </div>';return list};var index3=0;var loadMore3=function loadMore3(item){index3++;return '<li class="grid-item">\n        <a href="#" class="uk-thumbnail thumb-index-'+index3+'" tabindex="0">\n          <div class="thumbnail-image" style="background-image: url(images/location-images/'+item.imageName+');">&nbsp;</div>\n          <div class="caption">\n            <h4 class="thumbnail-heading">'+item.heading+'</h4>\n            <p class="text">'+item.copy+'</p>\n          </div>\n        </a>\n      </li>'};var index4=0;var loadMore4=function loadMore4(item){index4++;return '<li class="grid-item">\n      <a href="#" class="uk-thumbnail grid-index-'+index4+'">\n        <div class="thumbnail-image" title="'+item.imageTitle+'" style="background-image: url(images/event-images/'+item.imageName+');">&nbsp;</div>\n        <div class="uk-thumbnail-caption">\n          <h4 class="thumbnail-heading">'+item.heading+'</h4>\n          <h5 class="thumbnail-subheading">'+item.subHeading+'</h5>\n        </div>\n        <footer class="uk-thumbnail-caption">\n          <h5>'+item.location+'</h5>\n          <p>'+item.date+'<br>\n          '+item.time+'<br>\n          '+item.cost+'</p>\n        </footer>\n      </a>\n    </li>'};function loadMoreLoop(el,data,lm){var btn=el.find('[data-load-more]');var container=el.find('[data-load-more-list]');btn.removeClass('uk-hidden');btn.on(pointerEvent,function(e){e.preventDefault();$.each(data,function(i,value){container.append(lm(value))});$(this).remove();$('.link-index-1').focus();$('.thumb-index-1').focus();$('.poster-index-1').focus();$('.grid-index-1').focus();equal()})}
$(function(){$('[data-load-more-section]').each(function(){if(typeof multipleBooksPosterList!=='undefined'){loadMoreLoop($(this),multipleBooksPosterList,loadMore)}else if(typeof bookItemList!=='undefined'){loadMoreLoop($(this),bookItemList,loadMore2)}else if(typeof locationItemList!=='undefined'){loadMoreLoop($(this),locationItemList,loadMore3)}else if(typeof eventsGrid2!=='undefined'){loadMoreLoop($(this),eventsGrid2,loadMore4)}});$(document).on(pointerEvent,'.thumbnail-image-multiple-wrapper',function(e){})});$.fn.captionHeight=function(){var maxHeight=Math.max.apply(null,$(this).map(function(){return $(this).height()}).get());$(this).height(maxHeight)};$.fn.captionMaxHeight=function(){var maxHeight=Math.max.apply(null,$(this).map(function(){return $(this).find('.heading').height()+$(this).find('p:not(.text)').height()+$(this).find('h4 + a').height()+60}).get());$('.grid-view [data-grid-caption-height]').height(maxHeight)};$.fn.initCaptionHeight=function(heading,caption){if($(this).hasClass('grid-view')){heading.dotdotdot({ellipsis:'...',wrap:'word',watch:!0,callback:function callback(){caption.captionHeight()}})}else{heading.trigger('destroy');$('.caption').removeAttr('style')}};$(function(){var textbox=$('.textbox-with-a-button');var btnWrap=textbox.find('.btn-wrap');var uka=textbox.find('.uk-autocomplete');var closeBtn=textbox.find('.close-icon-button');closeBtn.on(pointerEvent,function(e){e.preventDefault();var el=$('.or-use-my-location');if(el.html()!=='Use my location'){btnWrap.toggleClass('uk-hidden');uka.toggleClass('uk-hidden');$('.or-use-my-location').html('Use my location')}});$('.or-use-my-location').on(pointerEvent,function(e){e.preventDefault();var el=$(this);btnWrap.toggleClass('uk-hidden');uka.toggleClass('uk-hidden');if(el.html()==='Use my location'){el.html('Stop using my location')}else{el.html('Use my location')}})});$(function(){$('[data-view-buttons]').each(function(){var $this=$(this);var btn=$this.find('button');var section=$this.parents('.section').next();var caption=section.find('[data-grid-caption-height]');var heading=section.find('.heading');btn.on(pointerEvent,function(){var viewGrid=$this.find('.grid');var viewList=$this.find('.list');var viewMap=$this.find('.map');$this.find('.focus').removeClass('focus');$(this).addClass('focus');section.removeClass('list-view grid-view map-view');if($(this).hasClass('map')){viewMap.css('z-index','2');viewGrid.css('z-index','1');$('.map-view').removeClass('uk-hidden');$('.grid-view-as').addClass('uk-hidden')}else if($(this).hasClass('list')){viewList.css('z-index','2');viewGrid.css('z-index','1');section.addClass('list-view')}else{viewList.css('z-index','1');viewGrid.css('z-index','2');$('.map-view').addClass('uk-hidden');$('.grid-view-as').removeClass('uk-hidden');section.addClass('grid-view')}
section.initCaptionHeight(heading,caption)})})});function resizeGridCaption(){$('.grid-view [data-grid-caption-height]:visible').each(function(){var caption=$(this);var heading=caption.find('.heading');var originalHeading=heading.data('original-heading');if(originalHeading!==undefined){heading.html(originalHeading)}
heading.dotdotdot({ellipsis:'...',watch:'window',height:'32px',fallbackToLetter:!0,callback:function callback(){caption.captionMaxHeight()}})})}
$(function(){$('.fav-draw .uk-close').on(pointerEvent,function(e){e.preventDefault();$('.add-to-favourites').removeClass('uk-active');$('.fav-draw').addClass('uk-hidden')});$('.edit-your-favourites').on(pointerEvent,function(e){$('.favourite-draw').attr('aria-hidden','false')});$('.add-to-favourites').on(pointerEvent,function(e){var el=$(this);if(el.data('add-to-favourites')===!0){el.toggleClass('fav-added');if(el.hasClass('fav-added')){$('#fav-2').prop('checked',!0);$('.favourite-added').removeClass('uk-hidden');$('.favourite-removed').addClass('uk-hidden')}else{$('#fav-2').prop('checked',!1);$('.favourite-added').addClass('uk-hidden');$('.favourite-removed').removeClass('uk-hidden')}}else{el.blur();el.toggleClass('uk-active');$('.fav-draw').toggleClass('uk-hidden')}});$('[for=fav-2]').on(pointerEvent,function(e){var el=$('#fav-2');if(el.prop('checked')){el.prop('checked',!0)}else{el.prop('checked',!1)}})});$(function(){$('.uk-accordion').find('.expand').on(pointerEvent,function(){var el=$(this);var accord=el.next().find('.uk-accordion-content');if(el.hasClass('uk-active')){accord.find('a').attr('tabindex','-1');accord.attr('aria-hidden',!0)}else{accord.find('a').attr('tabindex','0');accord.attr('aria-hidden',!1)}})});$(function(){$('.button-show').on(pointerEvent,function(){var sectionLocation=$('.section--location .location');var sectionSpan=$(this).find('span');var sectionI=$(this).find('i');sectionLocation.toggleClass('expanded');sectionI.toggleClass('close');if(sectionSpan.html()==='Show event search'){sectionSpan.html('Hide event search');sectionLocation.css('display','block')}else{sectionSpan.html('Show event search');sectionLocation.css('display','none')}})});$(function(){$('.show-more').on(pointerEvent,function(e){e.preventDefault();var icon=$(this).find('.icon');$('.show-more-section').toggleClass('uk-hidden');icon.toggleClass('icon-plus');icon.toggleClass('icon-minus')})});$(function(){$('.rsvp .uk-button').on(pointerEvent,function(){$('.rsvp-draw').toggleClass('uk-hidden');$('.rsvp-alert').addClass('uk-hidden')});$('.rsvp-draw').find('.uk-close, .submit').on(pointerEvent,function(e){e.preventDefault();$('.rsvp-draw').addClass('uk-hidden')});$('.rsvp-draw .submit').on(pointerEvent,function(e){e.preventDefault();$('.rsvp-alert').removeClass('uk-hidden')});$('.rsvp-alert .uk-close').on(pointerEvent,function(e){e.preventDefault();$('.rsvp-alert').addClass('uk-hidden')})});$(function(){$('[data-tabs-container]').each(function(){var $this=$(this);var tabs=$this.find('[data-tabs]');var tabsContent=$this.find('[data-tabs-content]');var tabsItem=tabs.find('li');var tabsContentItem=$('[data-tabs-content] > li');var tabItemMobile=$('[data-tab-mobile]');var tabItemInner=$('[data-tab-inner]');var tabShow=function tabShow(thisTab,index){$('body').trigger('resize');tabs.find('.uk-active').removeClass('uk-active');thisTab.addClass('uk-active');tabsItem.attr('aria-expanded',!1);thisTab.attr('aria-expanded',!0);tabsContentItem.removeClass('active');tabsContentItem.eq(index).addClass('active');tabsContentItem.attr('aria-hidden',!0);tabsContentItem.eq(index).attr('aria-hidden',!1);equal()};tabsItem.on(pointerEvent,function(e){e.preventDefault();tabShow($(this),$(this).index())});$(window).on('keyup',function(e){var code=e.keyCode?e.keyCode:e.which;var tabItemActive=tabs.find('.uk-active');if(code==13&&tabsItem.find('a').is(':focus')&&tabItemActive.length){var tabItemIndex=tabItemActive.index();tabsContentItem.eq(tabItemIndex).find('[data-tab-focus]').focus()}});tabItemMobile.on(pointerEvent,function(e){e.preventDefault();$('body').trigger('resize');var inner=$(this).next();if($(this).hasClass('open')){$(this).removeClass('open');inner.removeClass('open')}else{$(this).addClass('open');inner.addClass('open')}})})});$(function(){$('[data-toggle]').each(function(){var off=$(this).find('[data-toggle-off]');var on=$(this).find('[data-toggle-on]');var check=$(this).find('[type="checkbox"]');off.on(pointerEvent,function(){if(check.is(':checked')){check.prop('checked',!1)}}).on('keypress',function(e){var code=e.keyCode?e.keyCode:e.which;if(check.is(':checked')&&code==13){check.prop('checked',!1)}});on.on(pointerEvent,function(){if(!check.is(':checked')){check.prop('checked',!0)}}).on('keypress',function(e){var code=e.keyCode?e.keyCode:e.which;if(!check.is(':checked')&&code==13){check.prop('checked',!0)}})})});$(function(){$('.table-stacked-wrap .table-stacked').each(function(){var table=$(this);var thead=table.find('thead');var th=thead.find('th');var tbody=table.find('tbody');function stackTable(){table.attr('aria-hidden',!1);table.siblings('.table-stacked-cloned').remove();if($(window).width()<=breakpointSmall){if(th.length>=2){table.attr('aria-hidden',!0);th.each(function(){var index=$(this).index();var tableCloned=table.clone();tableCloned.find('th').not(':eq('+index+')').remove();tableCloned.find('tbody tr').each(function(){$(this).find('td').not(':eq('+index+')').remove()});tableCloned.addClass('table-stacked-cloned').insertBefore(table)})}else{table.show()}}}
$(window).on('resize load orientationchange',function(){stackTable()}).trigger('resize load orientationchange')});$('[data-table-first-col-fixed]').each(function(){var table=$(this);var fixedTable=$('<table></table>');var classNames=$(this).attr('class');var fixedHead=table.find('thead').clone();var fixedTbody=table.find('tbody').clone();fixedHead.find('tr').each(function(){$(this).find('th:gt(0)').remove()});fixedTbody.find('tr').each(function(){$(this).find('td:gt(0)').remove()});fixedTable.attr('class',classNames).addClass('table-first-fixed').prepend(fixedHead).append(fixedTbody);function fixTable(){if($(window).width()<breakpointSmall){fixedTable.insertAfter(table.parent())}else{if($('.table-first-fixed').length){$('.table-first-fixed').remove()}}}
$(document).on(pointerEvent,'.table-first-wrap tbody tr',function(){var index=$(this).index();var firstColTable=$('.table-first-fixed');$('.table-tap').removeClass('table-tap');table.find('tr').eq(index+1).addClass('table-tap');firstColTable.find('tr').eq(index+1).addClass('table-tap')});$(window).on('resize load orientationchange',function(){fixTable()}).trigger('resize load orientationchange')})});$(function(){$('[data-audio]').each(function(){var $this=$(this);var play=$this.find('[data-toggle-play]');var undo=$this.find('[data-undo]');var audio=this.querySelector('audio');play.on(pointerEvent,function(){if(audio.paused){audio.play();$(this).addClass('pause');$(this).find('span').text('Pause')}else{audio.pause();$(this).removeClass('pause');$(this).find('span').text('Play')}});undo.on(pointerEvent,function(){if(audio.paused){audio.currentTime=0;audio.pause();play.removeClass('pause');play.find('span').text('Play')}else{audio.currentTime=0;audio.play();play.addClass('pause');play.find('span').text('Pause')}});audio.addEventListener('ended',function(){play.removeClass('pause');play.find('span').text('Play')})})});function toggleNavExpand(buttonElement){var button=$(buttonElement);if(button.attr('aria-expanded')==='true'){button.attr('aria-expanded',!1)}else{$('.uk-accordion-title').attr('aria-expanded',!1);$('.nav-circle .rotate').attr('aria-expanded',!1);$('.uk-accordion-title.uk-active').attr('aria-expanded',!0);$('.third-tier-nav .uk-accordion-title.uk-active').attr('aria-expanded',!1);$('div.uk-width-1-1.uk-width-small-1-1.uk-width-medium-1-3.uk-width-large-1-4 .uk-accordion-content a').attr('tabindex',-1);button.attr('aria-expanded',!0)}}
$(document).ready(function(){var passwordCheck=document.getElementById('show-password-1');var librariesRadio=document.getElementById('search-libraries-catalogue');var catalogueRadio=document.getElementById('search-libraries-website');if(passwordCheck!=null){passwordCheck.addEventListener('keypress',function(event){if(event.keyCode==13){event.preventDefault();if(passwordCheck.checked===!0){passwordCheck.checked=!1}else{passwordCheck.checked=!0}}})}
librariesRadio.addEventListener('keypress',function(event){if(event.keyCode==13){event.preventDefault()}});catalogueRadio.addEventListener('keypress',function(event){if(event.keyCode==13){event.preventDefault()}});$('div.uk-accordion.accordion-reveal button.uk-accordion-title.accordion-title-simple.expand').attr('aria-expanded','false');$('div.uk-accordion.accordion-reveal button.uk-accordion-title.accordion-title-simple.expand.uk-active').attr('aria-expanded','true');$('div.uk-accordion.accordion-reveal button.uk-accordion-title.accordion-title-simple.expand').attr('onclick','toggleNavExpand(this);');$('.uk-accordion.accordion-reveal .uk-accordion-content a').attr('tabindex',-1);$('.uk-button.icon-button.icon--share').attr("onclick","$('span.share-title').focus();");$('.ms-webpart-chrome .uk-alert-close.uk-close').attr('onclick',"$('.uk-tab.tabs li.uk-active a').focus();");if($('.page-title').siblings('h2.subheading').length>0&&$('.page-title').siblings('h2.subheading').html().trim()==''){$('.page-title').siblings('h2.subheading').remove()}
$('.section--mobile-libraries a img').parent().attr('style','border-bottom:none;');$('.uk-margin-large-bottom a img').parent().attr('style','border-bottom:none;');if($("meta[property='og\\:title']").length<=0&&$('h1.page-title').html()!=undefined){$("head").append("<meta property='og:title' content='Auckland Libraries: "+$('h1.page-title').html().trim()+"' />")}
$('.phoneLink').each(function(){if($(this).html()!=undefined){$(this).attr('href','tel:'+$(this).html().trim().replace(/\D/g,''))}})});function createCookie(name,value,days){var expires="";if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));expires="; expires="+date.toUTCString()}
document.cookie=name+"="+value+expires+"; path=/"}
function handleRecordCoverImageError(source){try{var imageSrc=source.src,$this=$(source),$viewItem=$this.closest('.view-item'),$viewImageWrapper=$this.closest('.view-image-wrap');if($viewItem==null||$viewItem.length===0){}
else{if(imageSrc===null||imageSrc===''||imageSrc.toLowerCase().indexOf('isbn=/')===-1){$viewItem.addClass('view-item-cd-dvd');$viewImageWrapper.addClass('item-book-no-cover');var material="item-"+$viewItem.attr('data-materialtype');material=material.replace(" ","-");material=material.toLowerCase();$viewImageWrapper.addClass(material);$this.attr('src','/_layouts/15/images/blank.gif');$this.attr('style','height:253px')}
else{$viewItem.addClass('view-item-cd-dvd');$viewImageWrapper.addClass('item-book-no-cover');var material="item-"+$viewItem.attr('data-materialtype');material=material.replace(" ","-");material=material.toLowerCase();$viewImageWrapper.addClass(material);$this.attr('src','/_layouts/15/images/blank.gif');$this.attr('style','height:253px')}}}catch(e){}}
$(function(){$('.box').each(function(){var $form=$(this).find('.inner');var $input=$form.find('input[type="file"]');var $label=$form.find('label');var $undoBtn=$form.find('#undo');var uploadBtn=$form.find('.uk-button');$(this).on('keyup',function(e){if(e.which===13&&uploadBtn.is(':focus')){$input.trigger('click');return!1}});if(Modernizr.draganddrop){$form.on('drag dragstart dragend dragover dragenter dragleave drop',function(e){e.preventDefault();e.stopPropagation()}).on('dragover dragenter',function(){$form.addClass('is-dragover')}).on('dragleave dragend drop',function(){$form.removeClass('is-dragover')})}
$input.on('focus',function(){$input.addClass('has-focus')}).on('blur',function(){$input.removeClass('has-focus')})})});function Feedback_No(){var feedback=$('.feedback-buttons-container');var pageURL=window.location.href;if(window.location.pathname=="/"){pageURL+="Pages/home.aspx"}
var f={"FeedbackSelection":!1,"PageUrl":pageURL,"Comments":null,"ItemId":-1};$.ajax({url:'/_layouts/15/AucklandLibraries.Base.WebParts/Services/PageFeedback.ashx',method:'POST',contentType:"application/json;odata=verbose",data:JSON.stringify(f),headers:{'accept':'application/json;odata=verbose','X-RequestDigest':$('#__REQUESTDIGEST').val()},success:function(data){console.info(data);feedback.data("item",data);feedback.hide()},error:function(errorThrown){if(typeof console!=="undefined"&&typeof console.log!=="undefined"){console.log("Request failed: "+errorThrown)}}})}
function Feedback_Yes(){var feedback=$('.feedback-buttons-container');var pageURL=window.location.href;if(window.location.pathname=="/"){pageURL+="Pages/home.aspx"}
var f={"FeedbackSelection":!0,"PageUrl":pageURL,"Comments":null,"ItemId":-1};$.ajax({url:'/_layouts/15/AucklandLibraries.Base.WebParts/Services/PageFeedback.ashx',method:'POST',contentType:"application/json;odata=verbose",data:JSON.stringify(f),headers:{'accept':'application/json;odata=verbose','X-RequestDigest':$('#__REQUESTDIGEST').val()},success:function(data){console.info(data);feedback.data("item",data);feedback.hide()},error:function(errorThrown){if(typeof console!=="undefined"&&typeof console.log!=="undefined"){console.log("Request failed: "+errorThrown)}}})}
function SendFeedbackComment(){var feedback=$('.feedback-buttons-container');var fo=feedback.data('item');var pageURL=window.location.href;if(window.location.pathname=="/"){pageURL+="Pages/home.aspx"}
var f={"Comments":null,"FeedbackSelection":fo.FeedbackSelection,"PageUrl":pageURL,"ItemId":fo.ItemId};f.Comments=$('#feedbacktextarea').val();$.ajax({url:'/_layouts/15/AucklandLibraries.Base.WebParts/Services/PageFeedback.ashx',method:'POST',contentType:"application/json;odata=verbose",data:JSON.stringify(f),headers:{'accept':'application/json;odata=verbose','X-RequestDigest':$('#__REQUESTDIGEST').val()},success:function(data){$('.feedback-form > div').hide();$('.feedback-form > p').hide();$('.feedback-form > .feedback-buttons').show()},error:function(errorThrown){if(typeof console!=="undefined"&&typeof console.log!=="undefined"){console.log("Request failed: "+errorThrown)}
console.info("fail")}})}
function SkipFeedbackComment(){$('.feedback-form > div').hide();$('.feedback-form > p').hide();$('.feedback-form > .feedback-buttons').show()}
$(document).ready(function(){$(".DropDownSelect").select2({placeholder:"Please select an option",minimumResultsForSearch:Infinity})})